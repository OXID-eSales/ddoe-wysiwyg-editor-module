!function(a,b){if("object"==typeof exports&&"object"==typeof module)module.exports=b(require("jquery"));else if("function"==typeof define&&define.amd)define(["jquery"],b);else{var c=b("object"==typeof exports?require("jquery"):a.jQuery);for(var d in c)("object"==typeof exports?exports:a)[d]=c[d]}}(window,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=52)}({0:function(b,c){b.exports=a},1:function(a,b,c){"use strict";function d(a){"@babel/helpers - typeof";return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function g(a,b,c){return b&&f(a.prototype,b),c&&f(a,c),a}var h=c(0),i=c.n(h),j=function(){function a(b,c,d,f){e(this,a),this.markup=b,this.children=c,this.options=d,this.callback=f}return g(a,[{key:"render",value:function(a){var b=i()(this.markup);if(this.options&&this.options.contents&&b.html(this.options.contents),this.options&&this.options.className&&b.addClass(this.options.className),this.options&&this.options.data&&i.a.each(this.options.data,function(a,c){b.attr("data-"+a,c)}),this.options&&this.options.click&&b.on("click",this.options.click),this.children){var c=b.find(".note-children-container");this.children.forEach(function(a){a.render(c.length?c:b)})}return this.callback&&this.callback(b,this.options),this.options&&this.options.callback&&this.options.callback(b),a&&a.append(b),b}}]),a}();b.a={create:function(a,b){return function(){var c="object"===d(arguments[1])?arguments[1]:arguments[0],e=Array.isArray(arguments[0])?arguments[0]:[];return c&&c.children&&(e=c.children),new j(a,e,c,b)}}}},2:function(a,b){(function(b){a.exports=b}).call(this,{})},3:function(a,b,c){"use strict";function d(a){return-1===Lc.a.inArray(a.toLowerCase(),Oc)?"'".concat(a,"'"):a}function e(a){var b="Comic Sans MS"===a?"Courier New":"Comic Sans MS",c=document.createElement("canvas"),e=c.getContext("2d");e.font="200px '"+b+"'";var f=e.measureText("mmmmmmmmmmwwwww").width;return e.font="200px "+d(a)+', "'+b+'"',f!==e.measureText("mmmmmmmmmmwwwww").width}function f(a){return function(b){return a===b}}function g(a,b){return a===b}function h(a){return function(b,c){return b[a]===c[a]}}function i(){return!0}function j(){return!1}function k(a){return function(){return!a.apply(a,arguments)}}function l(a,b){return function(c){return a(c)&&b(c)}}function m(a){return a}function n(a,b){return function(){return a[b].apply(a,arguments)}}function o(){Wc=0}function p(a){var b=++Wc+"";return a?a+b:b}function q(a){var b=Lc()(document);return{top:a.top+b.scrollTop(),left:a.left+b.scrollLeft(),width:a.right-a.left,height:a.bottom-a.top}}function r(a){var b={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[a[c]]=c);return b}function s(a,b){return(b=b||"")+a.split(".").map(function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}).join("")}function t(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function u(a){return/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/gi.test(a)}function v(a){return a[0]}function w(a){return a[a.length-1]}function x(a){return a.slice(0,a.length-1)}function y(a){return a.slice(1)}function z(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e))return e}}function A(a,b){for(var c=0,d=a.length;c<d;c++)if(!b(a[c]))return!1;return!0}function B(a,b){if(a&&a.length&&b){if(a.indexOf)return-1!==a.indexOf(b);if(a.contains)return a.contains(b)}return!1}function C(a,b){return b=b||Xc.self,a.reduce(function(a,c){return a+b(c)},0)}function D(a){for(var b=[],c=a.length,d=-1;++d<c;)b[d]=a[d];return b}function E(a){return!a||!a.length}function F(a,b){return a.length?y(a).reduce(function(a,c){var d=w(a);return b(w(d),c)?d[d.length]=c:a[a.length]=[c],a},[[v(a)]]):[]}function G(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b}function H(a){for(var b=[],c=0,d=a.length;c<d;c++)B(b,a[c])||b.push(a[c]);return b}function I(a,b){if(a&&a.length&&b){var c=a.indexOf(b);return-1===c?null:a[c+1]}return null}function J(a,b){if(a&&a.length&&b){var c=a.indexOf(b);return-1===c?null:a[c-1]}return null}function K(a){return a&&Lc()(a).hasClass("note-editable")}function L(a){return a&&Lc()(a).hasClass("note-control-sizing")}function M(a){return a=a.toUpperCase(),function(b){return b&&b.nodeName.toUpperCase()===a}}function N(a){return a&&3===a.nodeType}function O(a){return a&&1===a.nodeType}function P(a){return a&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT|^AUDIO|^VIDEO|^EMBED/.test(a.nodeName.toUpperCase())}function Q(a){return!K(a)&&(a&&/^DIV|^P|^LI|^H[1-7]/.test(a.nodeName.toUpperCase()))}function R(a){return a&&/^H[1-7]/.test(a.nodeName.toUpperCase())}function S(a){return Q(a)&&!_c(a)}function T(a){return!(W(a)||U(a)||cd(a)||Q(a)||ad(a)||dd(a)||bd(a))}function U(a){return a&&/^UL|^OL/.test(a.nodeName.toUpperCase())}function V(a){return a&&/^TD|^TH/.test(a.nodeName.toUpperCase())}function W(a){return V(a)||dd(a)||K(a)}function X(a){return T(a)&&!!da(a,Q)}function Y(a){return T(a)&&!da(a,Q)}function Z(a,b){return a.nextSibling===b||a.previousSibling===b}function $(a,b){b=b||Xc.ok;var c=[];return a.previousSibling&&b(a.previousSibling)&&c.push(a.previousSibling),c.push(a),a.nextSibling&&b(a.nextSibling)&&c.push(a.nextSibling),c}function _(a){return N(a)?a.nodeValue.length:a?a.childNodes.length:0}function aa(a){do{if(null===a.firstElementChild||""===a.firstElementChild.innerHTML)break}while(a=a.firstElementChild);return ba(a)}function ba(a){var b=_(a);return 0===b||(!N(a)&&1===b&&a.innerHTML===gd||!(!Yc.all(a.childNodes,N)||""!==a.innerHTML))}function ca(a){P(a)||_(a)||(a.innerHTML=gd)}function da(a,b){for(;a;){if(b(a))return a;if(K(a))break;a=a.parentNode}return null}function ea(a,b){for(a=a.parentNode;a&&1===_(a);){if(b(a))return a;if(K(a))break;a=a.parentNode}return null}function fa(a,b){b=b||Xc.fail;var c=[];return da(a,function(a){return K(a)||c.push(a),b(a)}),c}function ga(a,b){var c=fa(a);return Yc.last(c.filter(b))}function ha(a,b){for(var c=fa(a),d=b;d;d=d.parentNode)if(c.indexOf(d)>-1)return d;return null}function ia(a,b){b=b||Xc.fail;for(var c=[];a&&!b(a);)c.push(a),a=a.previousSibling;return c}function ja(a,b){b=b||Xc.fail;for(var c=[];a&&!b(a);)c.push(a),a=a.nextSibling;return c}function ka(a,b){var c=[];return b=b||Xc.ok,function d(e){a!==e&&b(e)&&c.push(e);for(var f=0,g=e.childNodes.length;f<g;f++)d(e.childNodes[f])}(a),c}function la(a,b){var c=a.parentNode,d=Lc()("<"+b+">")[0];return c.insertBefore(d,a),d.appendChild(a),d}function ma(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function na(a,b){return Lc.a.each(b,function(b,c){a.appendChild(c)}),a}function oa(a){return 0===a.offset}function pa(a){return a.offset===_(a.node)}function qa(a){return oa(a)||pa(a)}function ra(a,b){for(;a&&a!==b;){if(0!==va(a))return!1;a=a.parentNode}return!0}function sa(a,b){if(!b)return!1;for(;a&&a!==b;){if(va(a)!==_(a.parentNode)-1)return!1;a=a.parentNode}return!0}function ta(a,b){return oa(a)&&ra(a.node,b)}function ua(a,b){return pa(a)&&sa(a.node,b)}function va(a){for(var b=0;a=a.previousSibling;)b+=1;return b}function wa(a){return!!(a&&a.childNodes&&a.childNodes.length)}function xa(a,b){var c,d;if(0===a.offset){if(K(a.node))return null;c=a.node.parentNode,d=va(a.node)}else wa(a.node)?(c=a.node.childNodes[a.offset-1],d=_(c)):(c=a.node,d=b?0:a.offset-1);return{node:c,offset:d}}function ya(a,b){var c,d;if(_(a.node)===a.offset){if(K(a.node))return null;var e=Aa(a.node);e?(c=e,d=0):(c=a.node.parentNode,d=va(a.node)+1)}else wa(a.node)?(c=a.node.childNodes[a.offset],d=0):(c=a.node,d=b?_(a.node):a.offset+1);return{node:c,offset:d}}function za(a,b){var c,d;if(ba(a.node))return c=a.node.nextSibling,d=0,{node:c,offset:d};if(_(a.node)===a.offset){if(K(a.node))return null;var e=Aa(a.node);e?(c=e,d=0):(c=a.node.parentNode,d=va(a.node)+1),K(c)&&(c=a.node.nextSibling,d=0)}else if(wa(a.node)){if(c=a.node.childNodes[a.offset],d=0,ba(c))return null}else if(c=a.node,d=b?_(a.node):a.offset+1,ba(c))return null;return{node:c,offset:d}}function Aa(a){if(a.nextSibling&&a.parent===a.nextSibling.parent)return N(a.nextSibling)?a.nextSibling:Aa(a.nextSibling)}function Ba(a,b){return a.node===b.node&&a.offset===b.offset}function Ca(a){if(N(a.node)||!wa(a.node)||ba(a.node))return!0;var b=a.node.childNodes[a.offset-1],c=a.node.childNodes[a.offset];return!(b&&!P(b)||c&&!P(c))}function Da(a,b){for(;a;){if(b(a))return a;a=xa(a)}return null}function Ea(a,b){for(;a;){if(b(a))return a;a=ya(a)}return null}function Fa(a){if(!N(a.node))return!1;var b=a.node.nodeValue.charAt(a.offset-1);return b&&" "!==b&&b!==Zc}function Ga(a){if(!N(a.node))return!1;var b=a.node.nodeValue.charAt(a.offset-1);return" "===b||b===Zc}function Ha(a,b,c,d){for(var e=a;e&&(c(e),!Ba(e,b));){e=za(e,d&&a.node!==e.node&&b.node!==e.node)}}function Ia(a,b){return fa(b,Xc.eq(a)).map(va).reverse()}function Ja(a,b){for(var c=a,d=0,e=b.length;d<e;d++)c=c.childNodes.length<=b[d]?c.childNodes[c.childNodes.length-1]:c.childNodes[b[d]];return c}function Ka(a,b){var c=b&&b.isSkipPaddingBlankHTML,d=b&&b.isNotSplitEdgePoint,e=b&&b.isDiscardEmptySplits;if(e&&(c=!0),qa(a)&&(N(a.node)||d)){if(oa(a))return a.node;if(pa(a))return a.node.nextSibling}if(N(a.node))return a.node.splitText(a.offset);var f=a.node.childNodes[a.offset],g=ma(a.node.cloneNode(!1),a.node);return na(g,ja(f)),c||(ca(a.node),ca(g)),e&&(ba(a.node)&&Pa(a.node),ba(g))?(Pa(g),a.node.nextSibling):g}function La(a,b,c){var d=fa(b.node,Xc.eq(a));return d.length?1===d.length?Ka(b,c):d.reduce(function(a,d){return a===b.node&&(a=Ka(b,c)),Ka({node:d,offset:a?va(a):_(d)},c)}):null}function Ma(a,b){var c,d,e=b?Q:W,f=fa(a.node,e),g=Yc.last(f)||a.node;e(g)?(c=f[f.length-2],d=g):(c=g,d=c.parentNode);var h=c&&La(c,a,{isSkipPaddingBlankHTML:b,isNotSplitEdgePoint:b});return h||d!==a.node||(h=a.node.childNodes[a.offset]),{rightNode:h,container:d}}function Na(a){return document.createElement(a)}function Oa(a){return document.createTextNode(a)}function Pa(a,b){if(a&&a.parentNode){if(a.removeNode)return a.removeNode(b);var c=a.parentNode;if(!b){for(var d=[],e=0,f=a.childNodes.length;e<f;e++)d.push(a.childNodes[e]);for(var g=0,h=d.length;g<h;g++)c.insertBefore(d[g],a)}c.removeChild(a)}}function Qa(a,b){for(;a&&!K(a)&&b(a);){var c=a.parentNode;Pa(a),a=c}}function Ra(a,b){if(a.nodeName.toUpperCase()===b.toUpperCase())return a;var c=Na(b);return a.style.cssText&&(c.style.cssText=a.style.cssText),na(c,Yc.from(a.childNodes)),ma(c,a),Pa(a),c}function Sa(a,b){var c=hd(a[0])?a.val():a.html();return b?c.replace(/[\n\r]/g,""):c}function Ta(a,b){var c=Sa(a);if(b){var d=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;c=c.replace(d,function(a,b,c){c=c.toUpperCase();var d=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(c)&&!!b,e=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(c);return a+(d||e?"\n":"")}),c=c.trim()}return c}function Ua(a){var b=Lc()(a),c=b.offset(),d=b.outerHeight(!0);return{left:c.left,top:c.top+d}}function Va(a,b){Object.keys(b).forEach(function(c){a.on(c,b[c])})}function Wa(a,b){Object.keys(b).forEach(function(c){a.off(c,b[c])})}function Xa(a){return a&&!N(a)&&Yc.contains(a.classList,"note-styletag")}function Ya(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function Za(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function $a(a,b,c){return b&&Za(a.prototype,b),c&&Za(a,c),a}function _a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function ab(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function bb(a,b,c){return b&&ab(a.prototype,b),c&&ab(a,c),a}function cb(a,b){var c,d,e=a.parentElement(),f=document.body.createTextRange(),g=Yc.from(e.childNodes);for(c=0;c<g.length;c++)if(!id.isText(g[c])){if(f.moveToElementText(g[c]),f.compareEndPoints("StartToStart",a)>=0)break;d=g[c]}if(0!==c&&id.isText(g[c-1])){var h=document.body.createTextRange(),i=null;h.moveToElementText(d||e),h.collapse(!d),i=d?d.nextSibling:e.firstChild;var j=a.duplicate();j.setEndPoint("StartToStart",h);for(var k=j.text.replace(/[\r\n]/g,"").length;k>i.nodeValue.length&&i.nextSibling;)k-=i.nodeValue.length,i=i.nextSibling;i.nodeValue;b&&i.nextSibling&&id.isText(i.nextSibling)&&k===i.nodeValue.length&&(k-=i.nodeValue.length,i=i.nextSibling),e=i,c=k}return{cont:e,offset:c}}function db(a){var b=document.body.createTextRange(),c=function a(b,c){var d,e;if(id.isText(b)){var f=id.listPrev(b,Xc.not(id.isText)),g=Yc.last(f).previousSibling;d=g||b.parentNode,c+=Yc.sum(Yc.tail(f),id.nodeLength),e=!g}else{if(d=b.childNodes[c]||b,id.isText(d))return a(d,0);c=0,e=!1}return{node:d,collapseToStart:e,offset:c}}(a.node,a.offset);return b.moveToElementText(c.node),b.collapse(c.collapseToStart),b.moveStart("character",c.offset),b}function eb(a){return Lc.a.Deferred(function(b){Lc.a.extend(new FileReader,{onload:function(a){var c=a.target.result;b.resolve(c)},onerror:function(a){b.reject(a)}}).readAsDataURL(a)}).promise()}function fb(a){return Lc.a.Deferred(function(b){var c=Lc()("<img>");c.one("load",function(){c.off("error abort"),b.resolve(c)}).one("error abort",function(){c.off("load").detach(),b.reject(c)}).css({display:"none"}).appendTo(document.body).attr("src",a)}).promise()}function gb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function hb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function ib(a,b,c){return b&&hb(a.prototype,b),c&&hb(a,c),a}function jb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function kb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function lb(a,b,c){return b&&kb(a.prototype,b),c&&kb(a,c),a}function mb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function nb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function ob(a,b,c){return b&&nb(a.prototype,b),c&&nb(a,c),a}function pb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function qb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function rb(a,b,c){return b&&qb(a.prototype,b),c&&qb(a,c),a}function sb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function tb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function ub(a,b,c){return b&&tb(a.prototype,b),c&&tb(a,c),a}function vb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function wb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function xb(a,b,c){return b&&wb(a.prototype,b),c&&wb(a,c),a}function yb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function zb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Ab(a,b,c){return b&&zb(a.prototype,b),c&&zb(a,c),a}function Bb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function Cb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Db(a,b,c){return b&&Cb(a.prototype,b),c&&Cb(a,c),a}function Eb(a){if("undefined"==typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(a=Fb(a))){var b=0,c=function(){};return{s:c,n:function(){return b>=a.length?{done:!0}:{done:!1,value:a[b++]}},e:function(a){throw a},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,e,f=!0,g=!1;return{s:function(){d=a[Symbol.iterator]()},n:function(){var a=d.next();return f=a.done,a},e:function(a){g=!0,e=a},f:function(){try{f||null==d.return||d.return()}finally{if(g)throw e}}}}function Fb(a,b){if(a){if("string"==typeof a)return Gb(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(c):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Gb(a,b):void 0}}function Gb(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=new Array(b);c<b;c++)d[c]=a[c];return d}function Hb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function Ib(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Jb(a,b,c){return b&&Ib(a.prototype,b),c&&Ib(a,c),a}function Kb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function Lb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Mb(a,b,c){return b&&Lb(a.prototype,b),c&&Lb(a,c),a}function Nb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function Ob(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Pb(a,b,c){return b&&Ob(a.prototype,b),c&&Ob(a,c),a}function Qb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function Rb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Sb(a,b,c){return b&&Rb(a.prototype,b),c&&Rb(a,c),a}function Tb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function Ub(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Vb(a,b,c){return b&&Ub(a.prototype,b),c&&Ub(a,c),a}function Wb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function Xb(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Yb(a,b,c){return b&&Xb(a.prototype,b),c&&Xb(a,c),a}function Zb(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function $b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function _b(a,b,c){return b&&$b(a.prototype,b),c&&$b(a,c),a}function ac(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function bc(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function cc(a,b,c){return b&&bc(a.prototype,b),c&&bc(a,c),a}function dc(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function ec(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function fc(a,b,c){return b&&ec(a.prototype,b),c&&ec(a,c),a}function gc(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function hc(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function ic(a,b,c){return b&&hc(a.prototype,b),c&&hc(a,c),a}function jc(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function kc(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function lc(a,b,c){return b&&kc(a.prototype,b),c&&kc(a,c),a}function mc(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function nc(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function oc(a,b,c){return b&&nc(a.prototype,b),c&&nc(a,c),a}function pc(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function qc(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function rc(a,b,c){return b&&qc(a.prototype,b),c&&qc(a,c),a}function sc(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function tc(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function uc(a,b,c){return b&&tc(a.prototype,b),c&&tc(a,c),a}function vc(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function wc(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function xc(a,b,c){return b&&wc(a.prototype,b),c&&wc(a,c),a}function yc(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function zc(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Ac(a,b,c){return b&&zc(a.prototype,b),c&&zc(a,c),a}function Bc(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function Cc(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Dc(a,b,c){return b&&Cc(a.prototype,b),c&&Cc(a,c),a}function Ec(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function Fc(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Gc(a,b,c){return b&&Fc(a.prototype,b),c&&Fc(a,c),a}function Hc(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function Ic(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function Jc(a,b,c){return b&&Ic(a.prototype,b),c&&Ic(a,c),a}var Kc=c(0),Lc=c.n(Kc);Lc.a.summernote=Lc.a.summernote||{lang:{}},Lc.a.extend(Lc.a.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size",sizeunit:"Font Size Unit"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize full",resizeHalf:"Resize half",resizeQuarter:"Resize quarter",resizeNone:"Original size",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Remove float",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window",useProtocol:"Use default protocol"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Text Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default",cpSelect:"Select"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{escape:"Escape",insertParagraph:"Insert Paragraph",undo:"Undo the last command",redo:"Redo the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"},output:{noSelection:"No Selection Made!"}}});var Mc,Nc="function"==typeof define&&c(2),Oc=["sans-serif","serif","monospace","cursive","fantasy"],Pc=navigator.userAgent,Qc=/MSIE|Trident/i.test(Pc);if(Qc){var Rc=/MSIE (\d+[.]\d+)/.exec(Pc);Rc&&(Mc=parseFloat(Rc[1])),Rc=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(Pc),Rc&&(Mc=parseFloat(Rc[1]))}var Sc=/Edge\/\d+/.test(Pc),Tc="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,Uc=Qc?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",Vc={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:Qc,isEdge:Sc,isFF:!Sc&&/firefox/i.test(Pc),isPhantom:/PhantomJS/i.test(Pc),isWebkit:!Sc&&/webkit/i.test(Pc),isChrome:!Sc&&/chrome/i.test(Pc),isSafari:!Sc&&/safari/i.test(Pc)&&!/chrome/i.test(Pc),browserVersion:Mc,jqueryVersion:parseFloat(Lc.a.fn.jquery),isSupportAmd:Nc,isSupportTouch:Tc,isFontInstalled:e,isW3CRangeSupport:!!document.createRange,inputEventName:Uc,genericFontFamilies:Oc,validFontName:d},Wc=0,Xc={eq:f,eq2:g,peq2:h,ok:i,fail:j,self:m,not:k,and:l,invoke:n,resetUniqueId:o,uniqueId:p,rect2bnd:q,invertObject:r,namespaceToCamel:s,debounce:t,isValidUrl:u},Yc={head:v,last:w,initial:x,tail:y,prev:J,next:I,find:z,contains:B,all:A,sum:C,from:D,isEmpty:E,clusterBy:F,compact:G,unique:H},Zc=String.fromCharCode(160),$c=M("PRE"),_c=M("LI"),ad=M("TABLE"),bd=M("DATA"),cd=M("HR"),dd=M("BLOCKQUOTE"),ed=M("A"),fd=M("BODY"),gd=Vc.isMSIE&&Vc.browserVersion<11?"&nbsp;":"<br>",hd=M("TEXTAREA"),id={NBSP_CHAR:Zc,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:gd,emptyPara:"<p>".concat(gd,"</p>"),makePredByNodeName:M,isEditable:K,isControlSizing:L,isText:N,isElement:O,isVoid:P,isPara:Q,isPurePara:S,isHeading:R,isInline:T,isBlock:Xc.not(T),isBodyInline:Y,isBody:fd,isParaInline:X,isPre:$c,isList:U,isTable:ad,isData:bd,isCell:V,isBlockquote:dd,isBodyContainer:W,isAnchor:ed,isDiv:M("DIV"),isLi:_c,isBR:M("BR"),isSpan:M("SPAN"),isB:M("B"),isU:M("U"),isS:M("S"),isI:M("I"),isImg:M("IMG"),isTextarea:hd,deepestChildIsEmpty:aa,isEmpty:ba,isEmptyAnchor:Xc.and(ed,ba),isClosestSibling:Z,withClosestSiblings:$,nodeLength:_,isLeftEdgePoint:oa,isRightEdgePoint:pa,isEdgePoint:qa,isLeftEdgeOf:ra,isRightEdgeOf:sa,isLeftEdgePointOf:ta,isRightEdgePointOf:ua,prevPoint:xa,nextPoint:ya,nextPointWithEmptyNode:za,isSamePoint:Ba,isVisiblePoint:Ca,prevPointUntil:Da,nextPointUntil:Ea,isCharPoint:Fa,isSpacePoint:Ga,walkPoint:Ha,ancestor:da,singleChildAncestor:ea,listAncestor:fa,lastAncestor:ga,listNext:ja,listPrev:ia,listDescendant:ka,commonAncestor:ha,wrap:la,insertAfter:ma,appendChildNodes:na,position:va,hasChildren:wa,makeOffsetPath:Ia,fromOffsetPath:Ja,splitTree:La,splitPoint:Ma,create:Na,createText:Oa,remove:Pa,removeWhile:Qa,replace:Ra,html:Ta,value:Sa,posFromPlaceholder:Ua,attachEvents:Va,detachEvents:Wa,isCustomStyleTag:Xa},jd=function(){function a(b,c){Ya(this,a),this.$note=b,this.memos={},this.modules={},this.layoutInfo={},this.options=Lc.a.extend(!0,{},c),Lc.a.summernote.ui=Lc.a.summernote.ui_template(this.options),this.ui=Lc.a.summernote.ui,this.initialize()}return $a(a,[{key:"initialize",value:function(){return this.layoutInfo=this.ui.createLayout(this.$note),this._initialize(),this.$note.hide(),this}},{key:"destroy",value:function(){this._destroy(),this.$note.removeData("summernote"),this.ui.removeLayout(this.$note,this.layoutInfo)}},{key:"reset",value:function(){var a=this.isDisabled();this.code(id.emptyPara),this._destroy(),this._initialize(),a&&this.disable()}},{key:"_initialize",value:function(){var a=this;this.options.id=Xc.uniqueId(Lc.a.now()),this.options.container=this.options.container||this.layoutInfo.editor;var b=Lc.a.extend({},this.options.buttons);Object.keys(b).forEach(function(c){a.memo("button."+c,b[c])});var c=Lc.a.extend({},this.options.modules,Lc.a.summernote.plugins||{});Object.keys(c).forEach(function(b){a.module(b,c[b],!0)}),Object.keys(this.modules).forEach(function(b){a.initializeModule(b)})}},{key:"_destroy",value:function(){var a=this;Object.keys(this.modules).reverse().forEach(function(b){a.removeModule(b)}),Object.keys(this.memos).forEach(function(b){a.removeMemo(b)}),
this.triggerEvent("destroy",this)}},{key:"code",value:function(a){var b=this.invoke("codeview.isActivated");if(void 0===a)return this.invoke("codeview.sync"),b?this.layoutInfo.codable.val():this.layoutInfo.editable.html();b?this.invoke("codeview.sync",a):this.layoutInfo.editable.html(a),this.$note.val(a),this.triggerEvent("change",a,this.layoutInfo.editable)}},{key:"isDisabled",value:function(){return"false"===this.layoutInfo.editable.attr("contenteditable")}},{key:"enable",value:function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0),this.triggerEvent("disable",!1),this.options.editing=!0}},{key:"disable",value:function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.options.editing=!1,this.invoke("toolbar.deactivate",!0),this.triggerEvent("disable",!0)}},{key:"triggerEvent",value:function(){var a=Yc.head(arguments),b=Yc.tail(Yc.from(arguments)),c=this.options.callbacks[Xc.namespaceToCamel(a,"on")];c&&c.apply(this.$note[0],b),this.$note.trigger("summernote."+a,b)}},{key:"initializeModule",value:function(a){var b=this.modules[a];b.shouldInitialize=b.shouldInitialize||Xc.ok,b.shouldInitialize()&&(b.initialize&&b.initialize(),b.events&&id.attachEvents(this.$note,b.events))}},{key:"module",value:function(a,b,c){if(1===arguments.length)return this.modules[a];this.modules[a]=new b(this),c||this.initializeModule(a)}},{key:"removeModule",value:function(a){var b=this.modules[a];b.shouldInitialize()&&(b.events&&id.detachEvents(this.$note,b.events),b.destroy&&b.destroy()),delete this.modules[a]}},{key:"memo",value:function(a,b){if(1===arguments.length)return this.memos[a];this.memos[a]=b}},{key:"removeMemo",value:function(a){this.memos[a]&&this.memos[a].destroy&&this.memos[a].destroy(),delete this.memos[a]}},{key:"createInvokeHandlerAndUpdateState",value:function(a,b){var c=this;return function(d){c.createInvokeHandler(a,b)(d),c.invoke("buttons.updateCurrentStyle")}}},{key:"createInvokeHandler",value:function(a,b){var c=this;return function(d){d.preventDefault();var e=Lc()(d.target);c.invoke(a,b||e.closest("[data-value]").data("value"),e)}}},{key:"invoke",value:function(){var a=Yc.head(arguments),b=Yc.tail(Yc.from(arguments)),c=a.split("."),d=c.length>1,e=d&&Yc.head(c),f=d?Yc.last(c):Yc.head(c),g=this.modules[e||"editor"];return!e&&this[f]?this[f].apply(this,b):g&&g[f]&&g.shouldInitialize()?g[f].apply(g,b):void 0}}]),a}();Lc.a.fn.extend({summernote:function(){var a=Lc.a.type(Yc.head(arguments)),b="string"===a,c="object"===a,d=Lc.a.extend({},Lc.a.summernote.options,c?Yc.head(arguments):{});d.langInfo=Lc.a.extend(!0,{},Lc.a.summernote.lang["en-US"],Lc.a.summernote.lang[d.lang]),d.icons=Lc.a.extend(!0,{},Lc.a.summernote.options.icons,d.icons),d.tooltip="auto"===d.tooltip?!Vc.isSupportTouch:d.tooltip,this.each(function(a,b){var c=Lc()(b);if(!c.data("summernote")){var e=new jd(c,d);c.data("summernote",e),c.data("summernote").triggerEvent("init",e.layoutInfo)}});var e=this.first();if(e.length){var f=e.data("summernote");if(b)return f.invoke.apply(f,Yc.from(arguments));d.focus&&f.invoke("editor.focus")}return this}});var kd=function(){function a(b,c,d,e){_a(this,a),this.sc=b,this.so=c,this.ec=d,this.eo=e,this.isOnEditable=this.makeIsOn(id.isEditable),this.isOnList=this.makeIsOn(id.isList),this.isOnAnchor=this.makeIsOn(id.isAnchor),this.isOnCell=this.makeIsOn(id.isCell),this.isOnData=this.makeIsOn(id.isData)}return bb(a,[{key:"nativeRange",value:function(){if(Vc.isW3CRangeSupport){var a=document.createRange();return a.setStart(this.sc,this.so),a.setEnd(this.ec,this.eo),a}var b=db({node:this.sc,offset:this.so});return b.setEndPoint("EndToEnd",db({node:this.ec,offset:this.eo})),b}},{key:"getPoints",value:function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}}},{key:"getStartPoint",value:function(){return{node:this.sc,offset:this.so}}},{key:"getEndPoint",value:function(){return{node:this.ec,offset:this.eo}}},{key:"select",value:function(){var a=this.nativeRange();if(Vc.isW3CRangeSupport){var b=document.getSelection();b.rangeCount>0&&b.removeAllRanges(),b.addRange(a)}else a.select();return this}},{key:"scrollIntoView",value:function(a){var b=Lc()(a).height();return a.scrollTop+b<this.sc.offsetTop&&(a.scrollTop+=Math.abs(a.scrollTop+b-this.sc.offsetTop)),this}},{key:"normalize",value:function(){var b=function(a,b){if(!a)return a;if(id.isVisiblePoint(a)&&(!id.isEdgePoint(a)||id.isRightEdgePoint(a)&&!b||id.isLeftEdgePoint(a)&&b||id.isRightEdgePoint(a)&&b&&id.isVoid(a.node.nextSibling)||id.isLeftEdgePoint(a)&&!b&&id.isVoid(a.node.previousSibling)||id.isBlock(a.node)&&id.isEmpty(a.node)))return a;var c=id.ancestor(a.node,id.isBlock),d=!1;if(!d){var e=id.prevPoint(a)||{node:null};d=(id.isLeftEdgePointOf(a,c)||id.isVoid(e.node))&&!b}var f=!1;if(!f){var g=id.nextPoint(a)||{node:null};f=(id.isRightEdgePointOf(a,c)||id.isVoid(g.node))&&b}if(d||f){if(id.isVisiblePoint(a))return a;b=!b}return(b?id.nextPointUntil(id.nextPoint(a),id.isVisiblePoint):id.prevPointUntil(id.prevPoint(a),id.isVisiblePoint))||a},c=b(this.getEndPoint(),!1),d=this.isCollapsed()?c:b(this.getStartPoint(),!0);return new a(d.node,d.offset,c.node,c.offset)}},{key:"nodes",value:function(a,b){a=a||Xc.ok;var c=b&&b.includeAncestor,d=b&&b.fullyContains,e=this.getStartPoint(),f=this.getEndPoint(),g=[],h=[];return id.walkPoint(e,f,function(b){if(!id.isEditable(b.node)){var e;d?(id.isLeftEdgePoint(b)&&h.push(b.node),id.isRightEdgePoint(b)&&Yc.contains(h,b.node)&&(e=b.node)):e=c?id.ancestor(b.node,a):b.node,e&&a(e)&&g.push(e)}},!0),Yc.unique(g)}},{key:"commonAncestor",value:function(){return id.commonAncestor(this.sc,this.ec)}},{key:"expand",value:function(b){var c=id.ancestor(this.sc,b),d=id.ancestor(this.ec,b);if(!c&&!d)return new a(this.sc,this.so,this.ec,this.eo);var e=this.getPoints();return c&&(e.sc=c,e.so=0),d&&(e.ec=d,e.eo=id.nodeLength(d)),new a(e.sc,e.so,e.ec,e.eo)}},{key:"collapse",value:function(b){return b?new a(this.sc,this.so,this.sc,this.so):new a(this.ec,this.eo,this.ec,this.eo)}},{key:"splitText",value:function(){var b=this.sc===this.ec,c=this.getPoints();return id.isText(this.ec)&&!id.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo),id.isText(this.sc)&&!id.isEdgePoint(this.getStartPoint())&&(c.sc=this.sc.splitText(this.so),c.so=0,b&&(c.ec=c.sc,c.eo=this.eo-this.so)),new a(c.sc,c.so,c.ec,c.eo)}},{key:"deleteContents",value:function(){if(this.isCollapsed())return this;var b=this.splitText(),c=b.nodes(null,{fullyContains:!0}),d=id.prevPointUntil(b.getStartPoint(),function(a){return!Yc.contains(c,a.node)}),e=[];return Lc.a.each(c,function(a,b){var c=b.parentNode;d.node!==c&&1===id.nodeLength(c)&&e.push(c),id.remove(b,!1)}),Lc.a.each(e,function(a,b){id.remove(b,!1)}),new a(d.node,d.offset,d.node,d.offset).normalize()}},{key:"makeIsOn",value:function(a){return function(){var b=id.ancestor(this.sc,a);return!!b&&b===id.ancestor(this.ec,a)}}},{key:"isLeftEdgeOf",value:function(a){if(!id.isLeftEdgePoint(this.getStartPoint()))return!1;var b=id.ancestor(this.sc,a);return b&&id.isLeftEdgeOf(this.sc,b)}},{key:"isCollapsed",value:function(){return this.sc===this.ec&&this.so===this.eo}},{key:"wrapBodyInlineWithPara",value:function(){if(id.isBodyContainer(this.sc)&&id.isEmpty(this.sc))return this.sc.innerHTML=id.emptyPara,new a(this.sc.firstChild,0,this.sc.firstChild,0);var b=this.normalize();if(id.isParaInline(this.sc)||id.isPara(this.sc))return b;var c;if(id.isInline(b.sc)){var d=id.listAncestor(b.sc,Xc.not(id.isInline));c=Yc.last(d),id.isInline(c)||(c=d[d.length-2]||b.sc.childNodes[b.so])}else c=b.sc.childNodes[b.so>0?b.so-1:0];if(c){var e=id.listPrev(c,id.isParaInline).reverse();if(e=e.concat(id.listNext(c.nextSibling,id.isParaInline)),e.length){var f=id.wrap(Yc.head(e),"p");id.appendChildNodes(f,Yc.tail(e))}}return this.normalize()}},{key:"insertNode",value:function(a){var b=this;(id.isText(a)||id.isInline(a))&&(b=this.wrapBodyInlineWithPara().deleteContents());var c=id.splitPoint(b.getStartPoint(),id.isInline(a));return c.rightNode?(c.rightNode.parentNode.insertBefore(a,c.rightNode),id.isEmpty(c.rightNode)&&id.isPara(a)&&c.rightNode.parentNode.removeChild(c.rightNode)):c.container.appendChild(a),a}},{key:"pasteHTML",value:function(a){a=Lc.a.trim(a);var b=Lc()("<div></div>").html(a)[0],c=Yc.from(b.childNodes),d=this,e=!1;return d.so>=0&&(c=c.reverse(),e=!0),c=c.map(function(a){return d.insertNode(a)}),e&&(c=c.reverse()),c}},{key:"toString",value:function(){var a=this.nativeRange();return Vc.isW3CRangeSupport?a.toString():a.text}},{key:"getWordRange",value:function(b){var c=this.getEndPoint();if(!id.isCharPoint(c))return this;var d=id.prevPointUntil(c,function(a){return!id.isCharPoint(a)});return b&&(c=id.nextPointUntil(c,function(a){return!id.isCharPoint(a)})),new a(d.node,d.offset,c.node,c.offset)}},{key:"getWordsRange",value:function(b){var c=this.getEndPoint(),d=function(a){return!id.isCharPoint(a)&&!id.isSpacePoint(a)};if(d(c))return this;var e=id.prevPointUntil(c,d);return b&&(c=id.nextPointUntil(c,d)),new a(e.node,e.offset,c.node,c.offset)}},{key:"getWordsMatchRange",value:function(b){var c=this.getEndPoint(),d=id.prevPointUntil(c,function(d){if(!id.isCharPoint(d)&&!id.isSpacePoint(d))return!0;var e=new a(d.node,d.offset,c.node,c.offset),f=b.exec(e.toString());return f&&0===f.index}),e=new a(d.node,d.offset,c.node,c.offset),f=e.toString(),g=b.exec(f);return g&&g[0].length===f.length?e:null}},{key:"bookmark",value:function(a){return{s:{path:id.makeOffsetPath(a,this.sc),offset:this.so},e:{path:id.makeOffsetPath(a,this.ec),offset:this.eo}}}},{key:"paraBookmark",value:function(a){return{s:{path:Yc.tail(id.makeOffsetPath(Yc.head(a),this.sc)),offset:this.so},e:{path:Yc.tail(id.makeOffsetPath(Yc.last(a),this.ec)),offset:this.eo}}}},{key:"getClientRects",value:function(){return this.nativeRange().getClientRects()}}]),a}(),ld={create:function(a,b,c,d){if(4===arguments.length)return new kd(a,b,c,d);if(2===arguments.length)return c=a,d=b,new kd(a,b,c,d);var e=this.createFromSelection();if(!e&&1===arguments.length){var f=arguments[0];return id.isEditable(f)&&(f=f.lastChild),this.createFromBodyElement(f,id.emptyPara===arguments[0].innerHTML)}return e},createFromBodyElement:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.createFromNode(a).collapse(b)},createFromSelection:function(){var a,b,c,d;if(Vc.isW3CRangeSupport){var e=document.getSelection();if(!e||0===e.rangeCount)return null;if(id.isBody(e.anchorNode))return null;var f=e.getRangeAt(0);a=f.startContainer,b=f.startOffset,c=f.endContainer,d=f.endOffset}else{var g=document.selection.createRange(),h=g.duplicate();h.collapse(!1);var i=g;i.collapse(!0);var j=cb(i,!0),k=cb(h,!1);id.isText(j.node)&&id.isLeftEdgePoint(j)&&id.isTextNode(k.node)&&id.isRightEdgePoint(k)&&k.node.nextSibling===j.node&&(j=k),a=j.cont,b=j.offset,c=k.cont,d=k.offset}return new kd(a,b,c,d)},createFromNode:function(a){var b=a,c=0,d=a,e=id.nodeLength(d);return id.isVoid(b)&&(c=id.listPrev(b).length-1,b=b.parentNode),id.isBR(d)?(e=id.listPrev(d).length-1,d=d.parentNode):id.isVoid(d)&&(e=id.listPrev(d).length,d=d.parentNode),this.create(b,c,d,e)},createFromNodeBefore:function(a){return this.createFromNode(a).collapse(!0)},createFromNodeAfter:function(a){return this.createFromNode(a).collapse()},createFromBookmark:function(a,b){var c=id.fromOffsetPath(a,b.s.path),d=b.s.offset,e=id.fromOffsetPath(a,b.e.path),f=b.e.offset;return new kd(c,d,e,f)},createFromParaBookmark:function(a,b){var c=a.s.offset,d=a.e.offset,e=id.fromOffsetPath(Yc.head(b),a.s.path),f=id.fromOffsetPath(Yc.last(b),a.e.path);return new kd(e,c,f,d)}},md={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34},nd={isEdit:function(a){return Yc.contains([md.BACKSPACE,md.TAB,md.ENTER,md.SPACE,md.DELETE],a)},isMove:function(a){return Yc.contains([md.LEFT,md.UP,md.RIGHT,md.DOWN],a)},isNavigation:function(a){return Yc.contains([md.HOME,md.END,md.PAGEUP,md.PAGEDOWN],a)},nameFromCode:Xc.invertObject(md),code:md},od=function(){function a(b){gb(this,a),this.stack=[],this.stackOffset=-1,this.context=b,this.$editable=b.layoutInfo.editable,this.editable=this.$editable[0]}return ib(a,[{key:"makeSnapshot",value:function(){var a=ld.create(this.editable),b={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:this.$editable.html(),bookmark:a&&a.isOnEditable()?a.bookmark(this.editable):b}}},{key:"applySnapshot",value:function(a){null!==a.contents&&this.$editable.html(a.contents),null!==a.bookmark&&ld.createFromBookmark(this.editable,a.bookmark).select()}},{key:"rewind",value:function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset=0,this.applySnapshot(this.stack[this.stackOffset])}},{key:"commit",value:function(){this.stack=[],this.stackOffset=-1,this.recordUndo()}},{key:"reset",value:function(){this.stack=[],this.stackOffset=-1,this.$editable.html(""),this.recordUndo()}},{key:"undo",value:function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset>0&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))}},{key:"redo",value:function(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))}},{key:"recordUndo",value:function(){this.stackOffset++,this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset)),this.stack.push(this.makeSnapshot()),this.stack.length>this.context.options.historyLimit&&(this.stack.shift(),this.stackOffset-=1)}}]),a}(),pd=function(){function a(){jb(this,a)}return lb(a,[{key:"jQueryCSS",value:function(a,b){if(Vc.jqueryVersion<1.9){var c={};return Lc.a.each(b,function(b,d){c[d]=a.css(d)}),c}return a.css(b)}},{key:"fromNode",value:function(a){var b=["font-family","font-size","text-align","list-style-type","line-height"],c=this.jQueryCSS(a,b)||{},d=a[0].style.fontSize||c["font-size"];return c["font-size"]=parseInt(d,10),c["font-size-unit"]=d.match(/[a-z%]+$/),c}},{key:"stylePara",value:function(a,b){Lc.a.each(a.nodes(id.isPara,{includeAncestor:!0}),function(a,c){Lc()(c).css(b)})}},{key:"styleNodes",value:function(a,b){a=a.splitText();var c=b&&b.nodeName||"SPAN",d=!(!b||!b.expandClosestSibling),e=!(!b||!b.onlyPartialContains);if(a.isCollapsed())return[a.insertNode(id.create(c))];var f=id.makePredByNodeName(c),g=a.nodes(id.isText,{fullyContains:!0}).map(function(a){return id.singleChildAncestor(a,f)||id.wrap(a,c)});if(d){if(e){var h=a.nodes();f=Xc.and(f,function(a){return Yc.contains(h,a)})}return g.map(function(a){var b=id.withClosestSiblings(a,f),c=Yc.head(b),d=Yc.tail(b);return Lc.a.each(d,function(a,b){id.appendChildNodes(c,b.childNodes),id.remove(b)}),Yc.head(b)})}return g}},{key:"current",value:function(a){var b=Lc()(id.isElement(a.sc)?a.sc:a.sc.parentNode),c=this.fromNode(b);try{c=Lc.a.extend(c,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||c["font-family"]})}catch(a){}if(a.isOnList()){var d=["circle","disc","disc-leading-zero","square"],e=d.indexOf(c["list-style-type"])>-1;c["list-style"]=e?"unordered":"ordered"}else c["list-style"]="none";var f=id.ancestor(a.sc,id.isPara);if(f&&f.style["line-height"])c["line-height"]=f.style.lineHeight;else{var g=parseInt(c["line-height"],10)/parseInt(c["font-size"],10);c["line-height"]=g.toFixed(1)}return c.anchor=a.isOnAnchor()&&id.ancestor(a.sc,id.isAnchor),c.ancestors=id.listAncestor(a.sc,id.isEditable),c.range=a,c}}]),a}(),qd=function(){function a(){mb(this,a)}return ob(a,[{key:"insertOrderedList",value:function(a){this.toggleList("OL",a)}},{key:"insertUnorderedList",value:function(a){this.toggleList("UL",a)}},{key:"indent",value:function(a){var b=this,c=ld.create(a).wrapBodyInlineWithPara(),d=c.nodes(id.isPara,{includeAncestor:!0}),e=Yc.clusterBy(d,Xc.peq2("parentNode"));Lc.a.each(e,function(a,c){var d=Yc.head(c);if(id.isLi(d)){var e=b.findList(d.previousSibling);e?c.map(function(a){return e.appendChild(a)}):(b.wrapList(c,d.parentNode.nodeName),c.map(function(a){return a.parentNode}).map(function(a){return b.appendToPrevious(a)}))}else Lc.a.each(c,function(a,b){Lc()(b).css("marginLeft",function(a,b){return(parseInt(b,10)||0)+25})})}),c.select()}},{key:"outdent",value:function(a){var b=this,c=ld.create(a).wrapBodyInlineWithPara(),d=c.nodes(id.isPara,{includeAncestor:!0}),e=Yc.clusterBy(d,Xc.peq2("parentNode"));Lc.a.each(e,function(a,c){var d=Yc.head(c);id.isLi(d)?b.releaseList([c]):Lc.a.each(c,function(a,b){Lc()(b).css("marginLeft",function(a,b){return b=parseInt(b,10)||0,b>25?b-25:""})})}),c.select()}},{key:"toggleList",value:function(a,b){var c=this,d=ld.create(b).wrapBodyInlineWithPara(),e=d.nodes(id.isPara,{includeAncestor:!0}),f=d.paraBookmark(e),g=Yc.clusterBy(e,Xc.peq2("parentNode"));if(Yc.find(e,id.isPurePara)){var h=[];Lc.a.each(g,function(b,d){h=h.concat(c.wrapList(d,a))}),e=h}else{var i=d.nodes(id.isList,{includeAncestor:!0}).filter(function(b){return!Lc.a.nodeName(b,a)});i.length?Lc.a.each(i,function(b,c){id.replace(c,a)}):e=this.releaseList(g,!0)}ld.createFromParaBookmark(f,e).select()}},{key:"wrapList",value:function(a,b){var c=Yc.head(a),d=Yc.last(a),e=id.isList(c.previousSibling)&&c.previousSibling,f=id.isList(d.nextSibling)&&d.nextSibling,g=e||id.insertAfter(id.create(b||"UL"),d);return a=a.map(function(a){return id.isPurePara(a)?id.replace(a,"LI"):a}),id.appendChildNodes(g,a),f&&(id.appendChildNodes(g,Yc.from(f.childNodes)),id.remove(f)),a}},{key:"releaseList",value:function(a,b){var c=this,d=[];return Lc.a.each(a,function(a,e){var f=Yc.head(e),g=Yc.last(e),h=b?id.lastAncestor(f,id.isList):f.parentNode,i=h.parentNode;if("LI"===h.parentNode.nodeName)e.map(function(a){var b=c.findNextSiblings(a);i.nextSibling?i.parentNode.insertBefore(a,i.nextSibling):i.parentNode.appendChild(a),b.length&&(c.wrapList(b,h.nodeName),a.appendChild(b[0].parentNode))}),0===h.children.length&&i.removeChild(h),0===i.childNodes.length&&i.parentNode.removeChild(i);else{var j=h.childNodes.length>1?id.splitTree(h,{node:g.parentNode,offset:id.position(g)+1},{isSkipPaddingBlankHTML:!0}):null,k=id.splitTree(h,{node:f.parentNode,offset:id.position(f)},{isSkipPaddingBlankHTML:!0});e=b?id.listDescendant(k,id.isLi):Yc.from(k.childNodes).filter(id.isLi),!b&&id.isList(h.parentNode)||(e=e.map(function(a){return id.replace(a,"P")})),Lc.a.each(Yc.from(e).reverse(),function(a,b){id.insertAfter(b,h)});var l=Yc.compact([h,k,j]);Lc.a.each(l,function(a,b){var c=[b].concat(id.listDescendant(b,id.isList));Lc.a.each(c.reverse(),function(a,b){id.nodeLength(b)||id.remove(b,!0)})})}d=d.concat(e)}),d}},{key:"appendToPrevious",value:function(a){return a.previousSibling?id.appendChildNodes(a.previousSibling,[a]):this.wrapList([a],"LI")}},{key:"findList",value:function(a){return a?Yc.find(a.children,function(a){return["OL","UL"].indexOf(a.nodeName)>-1}):null}},{key:"findNextSiblings",value:function(a){for(var b=[];a.nextSibling;)b.push(a.nextSibling),a=a.nextSibling;return b}}]),a}(),rd=function(){function a(b){pb(this,a),this.bullet=new qd,this.options=b.options}return rb(a,[{key:"insertTab",value:function(a,b){var c=id.createText(new Array(b+1).join(id.NBSP_CHAR));a=a.deleteContents(),a.insertNode(c,!0),a=ld.create(c,b),a.select()}},{key:"insertParagraph",value:function(a,b){b=b||ld.create(a),b=b.deleteContents(),b=b.wrapBodyInlineWithPara();var c,d=id.ancestor(b.sc,id.isPara);if(d){if(id.isLi(d)&&(id.isEmpty(d)||id.deepestChildIsEmpty(d)))return void this.bullet.toggleList(d.parentNode.nodeName);var e=null;if(1===this.options.blockquoteBreakingLevel?e=id.ancestor(d,id.isBlockquote):2===this.options.blockquoteBreakingLevel&&(e=id.lastAncestor(d,id.isBlockquote)),e){c=Lc()(id.emptyPara)[0],id.isRightEdgePoint(b.getStartPoint())&&id.isBR(b.sc.nextSibling)&&Lc()(b.sc.nextSibling).remove();var f=id.splitTree(e,b.getStartPoint(),{isDiscardEmptySplits:!0});f?f.parentNode.insertBefore(c,f):id.insertAfter(c,e)}else{c=id.splitTree(d,b.getStartPoint());var g=id.listDescendant(d,id.isEmptyAnchor);g=g.concat(id.listDescendant(c,id.isEmptyAnchor)),Lc.a.each(g,function(a,b){id.remove(b)}),(id.isHeading(c)||id.isPre(c)||id.isCustomStyleTag(c))&&id.isEmpty(c)&&(c=id.replace(c,"p"))}}else{var h=b.sc.childNodes[b.so];c=Lc()(id.emptyPara)[0],h?b.sc.insertBefore(c,h):b.sc.appendChild(c)}ld.create(c,0).normalize().select().scrollIntoView(a)}}]),a}(),sd=function a(b,c,d,e){function f(){b&&b.tagName&&("td"===b.tagName.toLowerCase()||"th"===b.tagName.toLowerCase())&&(o.colPos=b.cellIndex,b.parentElement&&b.parentElement.tagName&&"tr"===b.parentElement.tagName.toLowerCase()&&(o.rowPos=b.parentElement.rowIndex))}function g(a,b,c,d,e,f,g){var h={baseRow:c,baseCell:d,isRowSpan:e,isColSpan:f,isVirtual:g};p[a]||(p[a]=[]),p[a][b]=h}function h(a,b,c,d){return{baseCell:a.baseCell,action:b,virtualTable:{rowIndex:c,cellIndex:d}}}function i(a,b){if(!p[a])return b;if(!p[a][b])return b;for(var c=b;p[a][c];)if(c++,!p[a][c])return c}function j(a,b){var c=i(a.rowIndex,b.cellIndex),d=b.colSpan>1,e=b.rowSpan>1,f=a.rowIndex===o.rowPos&&b.cellIndex===o.colPos;g(a.rowIndex,c,a,b,e,d,!1);var h=b.attributes.rowSpan?parseInt(b.attributes.rowSpan.value,10):0;if(h>1)for(var j=1;j<h;j++){var l=a.rowIndex+j;k(l,c,b,f),g(l,c,a,b,!0,d,!0)}var m=b.attributes.colSpan?parseInt(b.attributes.colSpan.value,10):0;if(m>1)for(var n=1;n<m;n++){var p=i(a.rowIndex,c+n);k(a.rowIndex,p,b,f),g(a.rowIndex,p,a,b,e,!0,!0)}}function k(a,b,c,d){a===o.rowPos&&o.colPos>=c.cellIndex&&c.cellIndex<=b&&!d&&o.colPos++}function l(){for(var a=e.rows,b=0;b<a.length;b++)for(var c=a[b].cells,d=0;d<c.length;d++)j(a[b],c[d])}function m(b){switch(c){case a.where.Column:if(b.isColSpan)return a.resultAction.SubtractSpanCount;break;case a.where.Row:if(!b.isVirtual&&b.isRowSpan)return a.resultAction.AddCell;if(b.isRowSpan)return a.resultAction.SubtractSpanCount}return a.resultAction.RemoveCell}function n(b){switch(c){case a.where.Column:if(b.isColSpan)return a.resultAction.SumSpanCount;if(b.isRowSpan&&b.isVirtual)return a.resultAction.Ignore;break;case a.where.Row:if(b.isRowSpan)return a.resultAction.SumSpanCount;if(b.isColSpan&&b.isVirtual)return a.resultAction.Ignore}return a.resultAction.AddCell}var o={colPos:0,rowPos:0},p=[],q=[];this.getActionList=function(){for(var b=c===a.where.Row?o.rowPos:-1,e=c===a.where.Column?o.colPos:-1,f=0,g=!0;g;){var i=b>=0?b:f,j=e>=0?e:f,k=p[i];if(!k)return g=!1,q;var l=k[j];if(!l)return g=!1,q;var r=a.resultAction.Ignore;switch(d){case a.requestAction.Add:r=n(l);break;case a.requestAction.Delete:r=m(l)}q.push(h(l,r,i,j)),f++}return q},function(){f(),l()}()};sd.where={Row:0,Column:1},sd.requestAction={Add:0,Delete:1},sd.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var td=function(){function a(){sb(this,a)}return ub(a,[{key:"tab",value:function(a,b){var c=id.ancestor(a.commonAncestor(),id.isCell),d=id.ancestor(c,id.isTable),e=id.listDescendant(d,id.isCell),f=Yc[b?"prev":"next"](e,c);f&&ld.create(f,0).select()}},{key:"addRow",value:function(a,b){for(var c=id.ancestor(a.commonAncestor(),id.isCell),d=Lc()(c).closest("tr"),e=this.recoverAttributes(d),f=Lc()("<tr"+e+"></tr>"),g=new sd(c,sd.where.Row,sd.requestAction.Add,Lc()(d).closest("table")[0]),h=g.getActionList(),i=0;i<h.length;i++){var j=h[i],k=this.recoverAttributes(j.baseCell);switch(j.action){case sd.resultAction.AddCell:f.append("<td"+k+">"+id.blank+"</td>");break;case sd.resultAction.SumSpanCount:if("top"===b){if((j.baseCell.parent?j.baseCell.closest("tr").rowIndex:0)<=d[0].rowIndex){var l=Lc()("<div></div>").append(Lc()("<td"+k+">"+id.blank+"</td>").removeAttr("rowspan")).html();f.append(l);break}}var m=parseInt(j.baseCell.rowSpan,10);m++,j.baseCell.setAttribute("rowSpan",m)}}if("top"===b)d.before(f);else{if(c.rowSpan>1){var n=d[0].rowIndex+(c.rowSpan-2);return void Lc()(Lc()(d).parent().find("tr")[n]).after(Lc()(f))}d.after(f)}}},{key:"addCol",value:function(a,b){var c=id.ancestor(a.commonAncestor(),id.isCell),d=Lc()(c).closest("tr");Lc()(d).siblings().push(d);for(var e=new sd(c,sd.where.Column,sd.requestAction.Add,Lc()(d).closest("table")[0]),f=e.getActionList(),g=0;g<f.length;g++){var h=f[g],i=this.recoverAttributes(h.baseCell);switch(h.action){case sd.resultAction.AddCell:"right"===b?Lc()(h.baseCell).after("<td"+i+">"+id.blank+"</td>"):Lc()(h.baseCell).before("<td"+i+">"+id.blank+"</td>");break;case sd.resultAction.SumSpanCount:if("right"===b){var j=parseInt(h.baseCell.colSpan,10);j++,h.baseCell.setAttribute("colSpan",j)}else Lc()(h.baseCell).before("<td"+i+">"+id.blank+"</td>")}}}},{key:"recoverAttributes",value:function(a){var b="";if(!a)return b;for(var c=a.attributes||[],d=0;d<c.length;d++)"id"!==c[d].name.toLowerCase()&&c[d].specified&&(b+=" "+c[d].name+"='"+c[d].value+"'");return b}},{key:"deleteRow",value:function(a){for(var b=id.ancestor(a.commonAncestor(),id.isCell),c=Lc()(b).closest("tr"),d=c.children("td, th").index(Lc()(b)),e=c[0].rowIndex,f=new sd(b,sd.where.Row,sd.requestAction.Delete,Lc()(c).closest("table")[0]),g=f.getActionList(),h=0;h<g.length;h++)if(g[h]){var i=g[h].baseCell,j=g[h].virtualTable,k=i.rowSpan&&i.rowSpan>1,l=k?parseInt(i.rowSpan,10):0;switch(g[h].action){case sd.resultAction.Ignore:continue;case sd.resultAction.AddCell:var m=c.next("tr")[0];if(!m)continue;var n=c[0].cells[d];k&&(l>2?(l--,m.insertBefore(n,m.cells[d]),m.cells[d].setAttribute("rowSpan",l),m.cells[d].innerHTML=""):2===l&&(m.insertBefore(n,m.cells[d]),m.cells[d].removeAttribute("rowSpan"),m.cells[d].innerHTML=""));continue;case sd.resultAction.SubtractSpanCount:k&&(l>2?(l--,i.setAttribute("rowSpan",l),j.rowIndex!==e&&i.cellIndex===d&&(i.innerHTML="")):2===l&&(i.removeAttribute("rowSpan"),j.rowIndex!==e&&i.cellIndex===d&&(i.innerHTML="")));continue;case sd.resultAction.RemoveCell:continue}}c.remove()}},{key:"deleteCol",value:function(a){for(var b=id.ancestor(a.commonAncestor(),id.isCell),c=Lc()(b).closest("tr"),d=c.children("td, th").index(Lc()(b)),e=new sd(b,sd.where.Column,sd.requestAction.Delete,Lc()(c).closest("table")[0]),f=e.getActionList(),g=0;g<f.length;g++)if(f[g])switch(f[g].action){case sd.resultAction.Ignore:continue;case sd.resultAction.SubtractSpanCount:var h=f[g].baseCell,i=h.colSpan&&h.colSpan>1;if(i){var j=h.colSpan?parseInt(h.colSpan,10):0;j>2?(j--,h.setAttribute("colSpan",j),h.cellIndex===d&&(h.innerHTML="")):2===j&&(h.removeAttribute("colSpan"),h.cellIndex===d&&(h.innerHTML=""))}continue;case sd.resultAction.RemoveCell:id.remove(f[g].baseCell,!0);continue}}},{key:"createTable",value:function(a,b,c){for(var d,e=[],f=0;f<a;f++)e.push("<td>"+id.blank+"</td>");d=e.join("");for(var g,h=[],i=0;i<b;i++)h.push("<tr>"+d+"</tr>");g=h.join("");var j=Lc()("<table>"+g+"</table>");return c&&c.tableClassName&&j.addClass(c.tableClassName),j[0]}},{key:"deleteTable",value:function(a){var b=id.ancestor(a.commonAncestor(),id.isCell);Lc()(b).closest("table").remove()}}]),a}(),ud=function(){function a(b){var c=this;vb(this,a),this.context=b,this.$note=b.layoutInfo.note,this.$editor=b.layoutInfo.editor,this.$editable=b.layoutInfo.editable,this.options=b.options,this.lang=this.options.langInfo,this.editable=this.$editable[0],this.lastRange=null,this.snapshot=null,this.style=new pd,this.table=new td,this.typing=new rd(b),this.bullet=new qd,this.history=new od(b),this.context.memo("help.escape",this.lang.help.escape),this.context.memo("help.undo",this.lang.help.undo),this.context.memo("help.redo",this.lang.help.redo),this.context.memo("help.tab",this.lang.help.tab),this.context.memo("help.untab",this.lang.help.untab),this.context.memo("help.insertParagraph",this.lang.help.insertParagraph),this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList),this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList),this.context.memo("help.indent",this.lang.help.indent),this.context.memo("help.outdent",this.lang.help.outdent),this.context.memo("help.formatPara",this.lang.help.formatPara),this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule),this.context.memo("help.fontName",this.lang.help.fontName);for(var d=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"],e=0,f=d.length;e<f;e++)this[d[e]]=function(a){return function(b){c.beforeCommand(),document.execCommand(a,!1,b),c.afterCommand(!0)}}(d[e]),this.context.memo("help."+d[e],this.lang.help[d[e]]);this.fontName=this.wrapCommand(function(a){return c.fontStyling("font-family",Vc.validFontName(a))}),this.fontSize=this.wrapCommand(function(a){var b=c.currentStyle()["font-size-unit"];return c.fontStyling("font-size",a+b)}),this.fontSizeUnit=this.wrapCommand(function(a){var b=c.currentStyle()["font-size"];return c.fontStyling("font-size",b+a)});for(var g=1;g<=6;g++)this["formatH"+g]=function(a){return function(){c.formatBlock("H"+a)}}(g),this.context.memo("help.formatH"+g,this.lang.help["formatH"+g]);this.insertParagraph=this.wrapCommand(function(){c.typing.insertParagraph(c.editable)}),this.insertOrderedList=this.wrapCommand(function(){c.bullet.insertOrderedList(c.editable)}),this.insertUnorderedList=this.wrapCommand(function(){c.bullet.insertUnorderedList(c.editable)}),this.indent=this.wrapCommand(function(){c.bullet.indent(c.editable)}),this.outdent=this.wrapCommand(function(){c.bullet.outdent(c.editable)}),this.insertNode=this.wrapCommand(function(a){if(!c.isLimited(Lc()(a).text().length)){c.getLastRange().insertNode(a),c.setLastRange(ld.createFromNodeAfter(a).select())}}),this.insertText=this.wrapCommand(function(a){if(!c.isLimited(a.length)){var b=c.getLastRange(),d=b.insertNode(id.createText(a));c.setLastRange(ld.create(d,id.nodeLength(d)).select())}}),this.pasteHTML=this.wrapCommand(function(a){if(!c.isLimited(a.length)){a=c.context.invoke("codeview.purify",a);var b=c.getLastRange().pasteHTML(a);c.setLastRange(ld.createFromNodeAfter(Yc.last(b)).select())}}),this.formatBlock=this.wrapCommand(function(a,b){var d=c.options.callbacks.onApplyCustomStyle;d?d.call(c,b,c.context,c.onFormatBlock):c.onFormatBlock(a,b)}),this.insertHorizontalRule=this.wrapCommand(function(){var a=c.getLastRange().insertNode(id.create("HR"));a.nextSibling&&c.setLastRange(ld.create(a.nextSibling,0).normalize().select())}),this.lineHeight=this.wrapCommand(function(a){c.style.stylePara(c.getLastRange(),{lineHeight:a})}),this.createLink=this.wrapCommand(function(a){var b=a.url,d=a.cms,e=a.text,f=a.isNewWindow,g=a.checkProtocol,h=a.range||c.getLastRange(),i=e.length-h.toString().length;if(!(i>0&&c.isLimited(i))){var j=h.toString()!==e;"string"==typeof b&&(b=b.trim()),"string"==typeof d&&(d=d.trim()),d&&(b=""),c.options.onCreateLink?b=c.options.onCreateLink(b):g&&b&&-1===b.indexOf("{{")&&(b=/^([A-Za-z][A-Za-z0-9+-.]*\:|#|\/)/.test(b)?b:c.options.defaultProtocol+b);var k=[];if(j){h=h.deleteContents();var l=h.insertNode(Lc()("<A>"+e+"</A>")[0]);k.push(l)}else k=c.style.styleNodes(h,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});Lc.a.each(k,function(a,c){var e="";b?e=b:d&&(e=window.isSmarty?'[{oxgetseourl type="oxcontent" ident="'+d+'"}]':"{{ seo_url({ ident: '"+d+"' }) }}"),Lc()(c).attr("href",e),f?Lc()(c).attr("target","_blank"):Lc()(c).removeAttr("target")}),c.setLastRange(c.createRangeFromList(k).select())}}),
this.color=this.wrapCommand(function(a){var b=a.foreColor,c=a.backColor;b&&document.execCommand("foreColor",!1,b),c&&document.execCommand("backColor",!1,c)}),this.foreColor=this.wrapCommand(function(a){document.execCommand("foreColor",!1,a)}),this.insertTable=this.wrapCommand(function(a){var b=a.split("x");c.getLastRange().deleteContents().insertNode(c.table.createTable(b[0],b[1],c.options))}),this.removeMedia=this.wrapCommand(function(){var a=Lc()(c.restoreTarget()).parent();a.closest("figure").length?a.closest("figure").remove():a=Lc()(c.restoreTarget()).detach(),c.context.triggerEvent("media.delete",a,c.$editable)}),this.floatMe=this.wrapCommand(function(a){var b=Lc()(c.restoreTarget());b.toggleClass("note-float-left","left"===a),b.toggleClass("note-float-right","right"===a),b.css("float","none"===a?"":a)}),this.resize=this.wrapCommand(function(a){var b=Lc()(c.restoreTarget());a=parseFloat(a),0===a?b.css("width",""):b.css({width:100*a+"%",height:""})})}return xb(a,[{key:"initialize",value:function(){var a=this;this.$editable.on("keydown",function(b){if(b.keyCode===nd.code.ENTER&&a.context.triggerEvent("enter",b),a.context.triggerEvent("keydown",b),a.snapshot=a.history.makeSnapshot(),a.hasKeyShortCut=!1,b.isDefaultPrevented()||(a.options.shortcuts?a.hasKeyShortCut=a.handleKeyMap(b):a.preventDefaultEditableShortCuts(b)),a.isLimited(1,b)){var c=a.getLastRange();if(c.eo-c.so==0)return!1}a.setLastRange(),a.options.recordEveryKeystroke&&!1===a.hasKeyShortCut&&a.history.recordUndo()}).on("keyup",function(b){a.setLastRange(),a.context.triggerEvent("keyup",b)}).on("focus",function(b){a.setLastRange(),a.context.triggerEvent("focus",b)}).on("blur",function(b){a.context.triggerEvent("blur",b)}).on("mousedown",function(b){a.context.triggerEvent("mousedown",b)}).on("mouseup",function(b){a.setLastRange(),a.history.recordUndo(),a.context.triggerEvent("mouseup",b)}).on("scroll",function(b){a.context.triggerEvent("scroll",b)}).on("paste",function(b){a.setLastRange(),a.context.triggerEvent("paste",b)}).on("input",function(){a.isLimited(0)&&a.snapshot&&a.history.applySnapshot(a.snapshot)}),this.$editable.attr("spellcheck",this.options.spellCheck),this.$editable.attr("autocorrect",this.options.spellCheck),this.options.disableGrammar&&this.$editable.attr("data-gramm",!1),this.$editable.html(id.html(this.$note)||id.emptyPara),this.$editable.on(Vc.inputEventName,Xc.debounce(function(){a.context.triggerEvent("change",a.$editable.html(),a.$editable)},10)),this.$editable.on("focusin",function(b){a.context.triggerEvent("focusin",b)}).on("focusout",function(b){a.context.triggerEvent("focusout",b)}),this.options.airMode?this.options.overrideContextMenu&&this.$editor.on("contextmenu",function(b){return a.context.triggerEvent("contextmenu",b),!1}):(this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight)),this.history.recordUndo(),this.setLastRange()}},{key:"destroy",value:function(){this.$editable.off()}},{key:"handleKeyMap",value:function(a){var b=this.options.keyMap[Vc.isMac?"mac":"pc"],c=[];a.metaKey&&c.push("CMD"),a.ctrlKey&&!a.altKey&&c.push("CTRL"),a.shiftKey&&c.push("SHIFT");var d=nd.nameFromCode[a.keyCode];d&&c.push(d);var e=b[c.join("+")];if("TAB"!==d||this.options.tabDisable)if(e){if(!1!==this.context.invoke(e))return a.preventDefault(),!0}else nd.isEdit(a.keyCode)&&this.afterCommand();else this.afterCommand();return!1}},{key:"preventDefaultEditableShortCuts",value:function(a){(a.ctrlKey||a.metaKey)&&Yc.contains([66,73,85],a.keyCode)&&a.preventDefault()}},{key:"isLimited",value:function(a,b){return a=a||0,(void 0===b||!(nd.isMove(b.keyCode)||nd.isNavigation(b.keyCode)||b.ctrlKey||b.metaKey||Yc.contains([nd.code.BACKSPACE,nd.code.DELETE],b.keyCode)))&&(this.options.maxTextLength>0&&this.$editable.text().length+a>this.options.maxTextLength)}},{key:"createRange",value:function(){return this.focus(),this.setLastRange(),this.getLastRange()}},{key:"createRangeFromList",value:function(a){var b=ld.createFromNodeBefore(Yc.head(a)),c=b.getStartPoint(),d=ld.createFromNodeAfter(Yc.last(a)),e=d.getEndPoint();return ld.create(c.node,c.offset,e.node,e.offset)}},{key:"setLastRange",value:function(a){a?this.lastRange=a:(this.lastRange=ld.create(this.editable),0===Lc()(this.lastRange.sc).closest(".note-editable").length&&(this.lastRange=ld.createFromBodyElement(this.editable)))}},{key:"getLastRange",value:function(){return this.lastRange||this.setLastRange(),this.lastRange}},{key:"saveRange",value:function(a){a&&this.getLastRange().collapse().select()}},{key:"restoreRange",value:function(){this.lastRange&&(this.lastRange.select(),this.focus())}},{key:"saveTarget",value:function(a){this.$editable.data("target",a)}},{key:"clearTarget",value:function(){this.$editable.removeData("target")}},{key:"restoreTarget",value:function(){return this.$editable.data("target")}},{key:"currentStyle",value:function(){var a=ld.create();return a&&(a=a.normalize()),a?this.style.current(a):this.style.fromNode(this.$editable)}},{key:"styleFromNode",value:function(a){return this.style.fromNode(a)}},{key:"undo",value:function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.undo(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)}},{key:"commit",value:function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.commit(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)}},{key:"redo",value:function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.redo(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)}},{key:"beforeCommand",value:function(){this.context.triggerEvent("before.command",this.$editable.html()),document.execCommand("styleWithCSS",!1,this.options.styleWithCSS),this.focus()}},{key:"afterCommand",value:function(a){this.normalizeContent(),this.history.recordUndo(),a||this.context.triggerEvent("change",this.$editable.html(),this.$editable)}},{key:"tab",value:function(){var a=this.getLastRange();if(a.isCollapsed()&&a.isOnCell())this.table.tab(a);else{if(0===this.options.tabSize)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(a,this.options.tabSize),this.afterCommand())}}},{key:"untab",value:function(){var a=this.getLastRange();if(a.isCollapsed()&&a.isOnCell())this.table.tab(a,!0);else if(0===this.options.tabSize)return!1}},{key:"wrapCommand",value:function(a){return function(){this.beforeCommand(),a.apply(this,arguments),this.afterCommand()}}},{key:"insertImage",value:function(a,b){var c=this;return fb(a).then(function(a){c.beforeCommand(),"function"==typeof b?b(a):("string"==typeof b&&a.attr("data-filename",b),a.css("width",Math.min(c.$editable.width(),a.width()))),a.show(),c.getLastRange().insertNode(a[0]),c.setLastRange(ld.createFromNodeAfter(a[0]).select()),c.afterCommand()}).fail(function(a){c.context.triggerEvent("image.upload.error",a)})}},{key:"insertImagesAsDataURL",value:function(a){var b=this;Lc.a.each(a,function(a,c){var d=c.name;b.options.maximumImageFileSize&&b.options.maximumImageFileSize<c.size?b.context.triggerEvent("image.upload.error",b.lang.image.maximumFileSizeError):eb(c).then(function(a){return b.insertImage(a,d)}).fail(function(){b.context.triggerEvent("image.upload.error")})})}},{key:"insertImagesOrCallback",value:function(a){this.options.callbacks.onImageUpload?this.context.triggerEvent("image.upload",a):this.insertImagesAsDataURL(a)}},{key:"getSelectedText",value:function(){var a=this.getLastRange();return a.isOnAnchor()&&(a=ld.createFromNode(id.ancestor(a.sc,id.isAnchor))),a.toString()}},{key:"onFormatBlock",value:function(a,b){if(document.execCommand("FormatBlock",!1,Vc.isMSIE?"<"+a+">":a),b&&b.length&&(b[0].tagName.toUpperCase()!==a.toUpperCase()&&(b=b.find(a)),b&&b.length)){var c=b[0].className||"";if(c){var d=this.createRange();Lc()([d.sc,d.ec]).closest(a).addClass(c)}}}},{key:"formatPara",value:function(){this.formatBlock("P")}},{key:"fontStyling",value:function(a,b){var c=this.getLastRange();if(""!==c){var d=this.style.styleNodes(c);if(this.$editor.find(".note-status-output").html(""),Lc()(d).css(a,b),c.isCollapsed()){var e=Yc.head(d);e&&!id.nodeLength(e)&&(e.innerHTML=id.ZERO_WIDTH_NBSP_CHAR,ld.createFromNode(e.firstChild).select(),this.setLastRange(),this.$editable.data("bogus",e))}else this.setLastRange(this.createRangeFromList(d).select())}else{var f=Lc.a.now();this.$editor.find(".note-status-output").html('<div id="note-status-output-'+f+'" class="alert alert-info">'+this.lang.output.noSelection+"</div>"),setTimeout(function(){Lc()("#note-status-output-"+f).remove()},5e3)}}},{key:"unlink",value:function(){var a=this.getLastRange();if(a.isOnAnchor()){var b=id.ancestor(a.sc,id.isAnchor);a=ld.createFromNode(b),a.select(),this.setLastRange(),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand()}}},{key:"getLinkInfo",value:function(){var a=this.getLastRange().expand(id.isAnchor),b=Lc()(Yc.head(a.nodes(id.isAnchor))),c={range:a,text:a.toString(),url:b.length?b.attr("href"):""};return b.length&&(c.isNewWindow="_blank"===b.attr("target")),c}},{key:"addRow",value:function(a){var b=this.getLastRange(this.$editable);b.isCollapsed()&&b.isOnCell()&&(this.beforeCommand(),this.table.addRow(b,a),this.afterCommand())}},{key:"addCol",value:function(a){var b=this.getLastRange(this.$editable);b.isCollapsed()&&b.isOnCell()&&(this.beforeCommand(),this.table.addCol(b,a),this.afterCommand())}},{key:"deleteRow",value:function(){var a=this.getLastRange(this.$editable);a.isCollapsed()&&a.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(a),this.afterCommand())}},{key:"deleteCol",value:function(){var a=this.getLastRange(this.$editable);a.isCollapsed()&&a.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(a),this.afterCommand())}},{key:"deleteTable",value:function(){var a=this.getLastRange(this.$editable);a.isCollapsed()&&a.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(a),this.afterCommand())}},{key:"resizeTo",value:function(a,b,c){var d;if(c){var e=a.y/a.x,f=b.data("ratio");d={width:f>e?a.x:a.y/f,height:f>e?a.x*f:a.y}}else d={width:a.x,height:a.y};b.css(d)}},{key:"hasFocus",value:function(){return this.$editable.is(":focus")}},{key:"focus",value:function(){this.hasFocus()||this.$editable.focus()}},{key:"isEmpty",value:function(){return id.isEmpty(this.$editable[0])||id.emptyPara===this.$editable.html()}},{key:"empty",value:function(){this.context.invoke("code",id.emptyPara)}},{key:"normalizeContent",value:function(){this.$editable[0].normalize()}}]),a}(),vd=function(){function a(b){yb(this,a),this.context=b,this.$editable=b.layoutInfo.editable}return Ab(a,[{key:"initialize",value:function(){this.$editable.on("paste",this.pasteByEvent.bind(this))}},{key:"pasteByEvent",value:function(a){var b=this,c=a.originalEvent.clipboardData;if(c&&c.items&&c.items.length){var d=c.items.length>1?c.items[1]:Yc.head(c.items);"file"===d.kind&&-1!==d.type.indexOf("image/")?(this.context.invoke("editor.insertImagesOrCallback",[d.getAsFile()]),a.preventDefault()):"string"===d.kind&&this.context.invoke("editor.isLimited",c.getData("Text").length)&&a.preventDefault()}else if(window.clipboardData){var e=window.clipboardData.getData("text");this.context.invoke("editor.isLimited",e.length)&&a.preventDefault()}setTimeout(function(){b.context.invoke("editor.afterCommand")},10)}}]),a}(),wd=function(){function a(b){Bb(this,a),this.context=b,this.$eventListener=Lc()(document),this.$editor=b.layoutInfo.editor,this.$editable=b.layoutInfo.editable,this.options=b.options,this.lang=this.options.langInfo,this.documentEventHandlers={},this.$dropzone=Lc()(['<div class="note-dropzone">','<div class="note-dropzone-message"></div>',"</div>"].join("")).prependTo(this.$editor)}return Db(a,[{key:"initialize",value:function(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=function(a){a.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()}},{key:"attachDragAndDropEvent",value:function(){var a=this,b=Lc()(),c=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(d){var e=a.context.invoke("codeview.isActivated"),f=a.$editor.width()>0&&a.$editor.height()>0;e||b.length||!f||(a.$editor.addClass("dragover"),a.$dropzone.width(a.$editor.width()),a.$dropzone.height(a.$editor.height()),c.text(a.lang.image.dragImageHere)),b=b.add(d.target)},this.documentEventHandlers.onDragleave=function(c){b=b.not(c.target),b.length&&"BODY"!==c.target.nodeName||(b=Lc()(),a.$editor.removeClass("dragover"))},this.documentEventHandlers.onDrop=function(){b=Lc()(),a.$editor.removeClass("dragover")},this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop),this.$dropzone.on("dragenter",function(){a.$dropzone.addClass("hover"),c.text(a.lang.image.dropImage)}).on("dragleave",function(){a.$dropzone.removeClass("hover"),c.text(a.lang.image.dragImageHere)}),this.$dropzone.on("drop",function(b){var c=b.originalEvent.dataTransfer;b.preventDefault(),c&&c.files&&c.files.length?(a.$editable.focus(),a.context.invoke("editor.insertImagesOrCallback",c.files)):Lc.a.each(c.types,function(b,d){if(!(d.toLowerCase().indexOf("_moz_")>-1)){var e=c.getData(d);d.toLowerCase().indexOf("text")>-1?a.context.invoke("editor.pasteHTML",e):Lc()(e).each(function(b,c){a.context.invoke("editor.insertNode",c)})}})}).on("dragover",!1)}},{key:"destroy",value:function(){var a=this;Object.keys(this.documentEventHandlers).forEach(function(b){a.$eventListener.off(b.substr(2).toLowerCase(),a.documentEventHandlers[b])}),this.documentEventHandlers={}}}]),a}(),xd=function(){function a(b){Hb(this,a),this.context=b,this.$editor=b.layoutInfo.editor,this.$editable=b.layoutInfo.editable,this.$codable=b.layoutInfo.codable,this.options=b.options,this.CodeMirrorConstructor=window.CodeMirror,this.options.codemirror.CodeMirrorConstructor&&(this.CodeMirrorConstructor=this.options.codemirror.CodeMirrorConstructor)}return Jb(a,[{key:"sync",value:function(a){var b=this.isActivated(),c=this.CodeMirrorConstructor;b&&(a?c?this.$codable.data("cmEditor").getDoc().setValue(a):this.$codable.val(a):c&&this.$codable.data("cmEditor").save())}},{key:"initialize",value:function(){var a=this;this.$codable.on("keyup",function(b){b.keyCode===nd.code.ESCAPE&&a.deactivate()})}},{key:"isActivated",value:function(){return this.$editor.hasClass("codeview")}},{key:"toggle",value:function(){this.isActivated()?this.deactivate():this.activate(),this.context.triggerEvent("codeview.toggled")}},{key:"purify",value:function(a){if(this.options.codeviewFilter&&(a=a.replace(this.options.codeviewFilterRegex,""),this.options.codeviewIframeFilter)){var b=this.options.codeviewIframeWhitelistSrc.concat(this.options.codeviewIframeWhitelistSrcBase);a=a.replace(/(<iframe.*?>.*?(?:<\/iframe>)?)/gi,function(a){if(/<.+src(?==?('|"|\s)?)[\s\S]+src(?=('|"|\s)?)[^>]*?>/i.test(a))return"";var c,d=Eb(b);try{for(d.s();!(c=d.n()).done;){var e=c.value;if(new RegExp('src="(https?:)?//'+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+'/(.+)"').test(a))return a}}catch(a){d.e(a)}finally{d.f()}return""})}return a}},{key:"activate",value:function(){var a=this,b=this.CodeMirrorConstructor;if(this.$codable.val(id.html(this.$editable,this.options.prettifyHtml)),this.$codable.height(this.$editable.height()),this.context.invoke("toolbar.updateCodeview",!0),this.context.invoke("airPopover.updateCodeview",!0),this.$editor.addClass("codeview"),this.$codable.focus(),b){var c=b.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var d=new b.TernServer(this.options.codemirror.tern);c.ternServer=d,c.on("cursorActivity",function(a){d.updateArgHints(a)})}c.on("blur",function(b){a.context.triggerEvent("blur.codeview",c.getValue(),b)}),c.on("change",function(){a.context.triggerEvent("change.codeview",c.getValue(),c)}),c.setSize(null,this.$editable.outerHeight()),this.$codable.data("cmEditor",c)}else this.$codable.on("blur",function(b){a.context.triggerEvent("blur.codeview",a.$codable.val(),b)}),this.$codable.on("input",function(){a.context.triggerEvent("change.codeview",a.$codable.val(),a.$codable)})}},{key:"deactivate",value:function(){if(this.CodeMirrorConstructor){var a=this.$codable.data("cmEditor");this.$codable.val(a.getValue()),a.toTextArea()}var b=this.purify(id.value(this.$codable,this.options.prettifyHtml)||id.emptyPara),c=this.$editable.html()!==b;this.$editable.html(b),this.$editable.height(this.options.height?this.$codable.height():"auto"),this.$editor.removeClass("codeview"),c&&this.context.triggerEvent("change",this.$editable.html(),this.$editable),this.$editable.focus(),this.context.invoke("toolbar.updateCodeview",!1),this.context.invoke("airPopover.updateCodeview",!1)}},{key:"destroy",value:function(){this.isActivated()&&this.deactivate()}}]),a}(),yd=function(){function a(b){Kb(this,a),this.$document=Lc()(document),this.$statusbar=b.layoutInfo.statusbar,this.$editable=b.layoutInfo.editable,this.options=b.options}return Mb(a,[{key:"initialize",value:function(){var a=this;if(this.options.airMode||this.options.disableResizeEditor)return void this.destroy();this.$statusbar.on("mousedown",function(b){b.preventDefault(),b.stopPropagation();var c=a.$editable.offset().top-a.$document.scrollTop(),d=function(b){var d=b.clientY-(c+24);d=a.options.minheight>0?Math.max(d,a.options.minheight):d,d=a.options.maxHeight>0?Math.min(d,a.options.maxHeight):d,a.$editable.height(d)};a.$document.on("mousemove",d).one("mouseup",function(){a.$document.off("mousemove",d)})})}},{key:"destroy",value:function(){this.$statusbar.off(),this.$statusbar.addClass("locked")}}]),a}(),zd=function(){function a(b){var c=this;Nb(this,a),this.context=b,this.$editor=b.layoutInfo.editor,this.$toolbar=b.layoutInfo.toolbar,this.$editable=b.layoutInfo.editable,this.$codable=b.layoutInfo.codable,this.$window=Lc()(window),this.$scrollbar=Lc()("html, body"),this.onResize=function(){c.resizeTo({h:c.$window.height()-c.$toolbar.outerHeight()})}}return Pb(a,[{key:"resizeTo",value:function(a){this.$editable.css("height",a.h),this.$codable.css("height",a.h),this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,a.h)}},{key:"toggle",value:function(){this.$editor.toggleClass("fullscreen"),this.isFullscreen()?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$editable.data("orgMaxHeight",this.$editable.css("maxHeight")),this.$editable.css("maxHeight",""),this.$window.on("resize",this.onResize).trigger("resize"),this.$scrollbar.css("overflow","hidden")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$editable.css("maxHeight",this.$editable.css("orgMaxHeight")),this.$scrollbar.css("overflow","visible")),this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())}},{key:"isFullscreen",value:function(){return this.$editor.hasClass("fullscreen")}}]),a}(),Ad=function(){function a(b){var c=this;Qb(this,a),this.context=b,this.$document=Lc()(document),this.$editingArea=b.layoutInfo.editingArea,this.options=b.options,this.lang=this.options.langInfo,this.events={"summernote.mousedown":function(a,b){c.update(b.target,b)&&b.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){c.update()},"summernote.disable summernote.blur":function(){c.hide()},"summernote.codeview.toggled":function(){c.update()}}}return Sb(a,[{key:"initialize",value:function(){var a=this;this.$handle=Lc()(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea),this.$handle.on("mousedown",function(b){if(id.isControlSizing(b.target)){b.preventDefault(),b.stopPropagation();var c=a.$handle.find(".note-control-selection").data("target"),d=c.offset(),e=a.$document.scrollTop(),f=function(b){a.context.invoke("editor.resizeTo",{x:b.clientX-d.left,y:b.clientY-(d.top-e)},c,!b.shiftKey),a.update(c[0],b)};a.$document.on("mousemove",f).one("mouseup",function(b){b.preventDefault(),a.$document.off("mousemove",f),a.context.invoke("editor.afterCommand")}),c.data("ratio")||c.data("ratio",c.height()/c.width())}}),this.$handle.on("wheel",function(b){b.preventDefault(),a.update()})}},{key:"destroy",value:function(){this.$handle.remove()}},{key:"update",value:function(a,b){if(this.context.isDisabled())return!1;var c=id.isImg(a),d=this.$handle.find(".note-control-selection");if(this.context.invoke("imagePopover.update",a,b),c){var e=Lc()(a),f=e.position(),g={left:f.left+parseInt(e.css("marginLeft"),10),top:f.top+parseInt(e.css("marginTop"),10)},h={w:e.outerWidth(!1),h:e.outerHeight(!1)};d.css({display:"block",left:g.left,top:g.top,width:h.w,height:h.h}).data("target",e);var i=new Image;i.src=e.attr("src");var j=h.w+"x"+h.h+" ("+this.lang.image.original+": "+i.width+"x"+i.height+")";d.find(".note-control-selection-info").text(j),this.context.invoke("editor.saveTarget",a)}else this.hide();return c}},{key:"hide",value:function(){this.context.invoke("editor.clearTarget"),this.$handle.children().hide()}}]),a}(),Bd=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/]{2}|tel:|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i,Cd=function(){function a(b){var c=this;Tb(this,a),this.context=b,this.options=b.options,this.events={"summernote.keyup":function(a,b){b.isDefaultPrevented()||c.handleKeyup(b)},"summernote.keydown":function(a,b){c.handleKeydown(b)}}}return Vb(a,[{key:"initialize",value:function(){this.lastWordRange=null}},{key:"destroy",value:function(){this.lastWordRange=null}},{key:"replace",value:function(){if(this.lastWordRange){var a=this.lastWordRange.toString(),b=a.match(Bd);if(b&&(b[1]||b[2])){var c=b[1]?a:"http://"+a,d=this.options.showDomainOnlyForAutolink?a.replace(/^(?:https?:\/\/)?(?:tel?:?)?(?:mailto?:?)?(?:www\.)?/i,"").split("/")[0]:a,e=Lc()("<a />").html(d).attr("href",c)[0];this.context.options.linkTargetBlank&&Lc()(e).attr("target","_blank"),this.lastWordRange.insertNode(e),this.lastWordRange=null,this.context.invoke("editor.focus")}}}},{key:"handleKeydown",value:function(a){if(Yc.contains([nd.code.ENTER,nd.code.SPACE],a.keyCode)){var b=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=b}}},{key:"handleKeyup",value:function(a){Yc.contains([nd.code.ENTER,nd.code.SPACE],a.keyCode)&&this.replace()}}]),a}(),Dd=function(){function a(b){var c=this;Wb(this,a),this.$note=b.layoutInfo.note,this.events={"summernote.change":function(){c.$note.val(b.invoke("code"))}}}return Yb(a,[{key:"shouldInitialize",value:function(){return id.isTextarea(this.$note[0])}}]),a}(),Ed=function(){function a(b){var c=this;Zb(this,a),this.context=b,this.options=b.options.replace||{},this.keys=[nd.code.ENTER,nd.code.SPACE,nd.code.PERIOD,nd.code.COMMA,nd.code.SEMICOLON,nd.code.SLASH],this.previousKeydownCode=null,this.events={"summernote.keyup":function(a,b){b.isDefaultPrevented()||c.handleKeyup(b)},"summernote.keydown":function(a,b){c.handleKeydown(b)}}}return _b(a,[{key:"shouldInitialize",value:function(){return!!this.options.match}},{key:"initialize",value:function(){this.lastWord=null}},{key:"destroy",value:function(){this.lastWord=null}},{key:"replace",value:function(){if(this.lastWord){var a=this,b=this.lastWord.toString();this.options.match(b,function(b){if(b){var c="";if("string"==typeof b?c=id.createText(b):b instanceof jQuery?c=b[0]:b instanceof Node&&(c=b),!c)return;a.lastWord.insertNode(c),a.lastWord=null,a.context.invoke("editor.focus")}})}}},{key:"handleKeydown",value:function(a){if(this.previousKeydownCode&&Yc.contains(this.keys,this.previousKeydownCode))return void(this.previousKeydownCode=a.keyCode);if(Yc.contains(this.keys,a.keyCode)){var b=this.context.invoke("editor.createRange").getWordRange();this.lastWord=b}this.previousKeydownCode=a.keyCode}},{key:"handleKeyup",value:function(a){Yc.contains(this.keys,a.keyCode)&&this.replace()}}]),a}(),Fd=function(){function a(b){var c=this;ac(this,a),this.context=b,this.$editingArea=b.layoutInfo.editingArea,this.options=b.options,!0===this.options.inheritPlaceholder&&(this.options.placeholder=this.context.$note.attr("placeholder")||this.options.placeholder),this.events={"summernote.init summernote.change":function(){c.update()},"summernote.codeview.toggled":function(){c.update()}}}return cc(a,[{key:"shouldInitialize",value:function(){return!!this.options.placeholder}},{key:"initialize",value:function(){var a=this;this.$placeholder=Lc()('<div class="note-placeholder">'),this.$placeholder.on("click",function(){a.context.invoke("focus")}).html(this.options.placeholder).prependTo(this.$editingArea),this.update()}},{key:"destroy",value:function(){this.$placeholder.remove()}},{key:"update",value:function(){var a=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(a)}}]),a}(),Gd=function(){function a(b){dc(this,a),this.ui=Lc.a.summernote.ui,this.context=b,this.$toolbar=b.layoutInfo.toolbar,this.options=b.options,this.lang=this.options.langInfo,this.invertedKeyMap=Xc.invertObject(this.options.keyMap[Vc.isMac?"mac":"pc"])}return fc(a,[{key:"representShortcut",value:function(a){var b=this.invertedKeyMap[a];return this.options.shortcuts&&b?(Vc.isMac&&(b=b.replace("CMD","⌘").replace("SHIFT","⇧"))," ("+(b=b.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]"))+")"):""}},{key:"button",value:function(a){return!this.options.tooltip&&a.tooltip&&delete a.tooltip,a.container=this.options.container,this.ui.button(a)}},{key:"initialize",value:function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.addTablePopoverButtons(),this.fontInstalledMap={}}},{key:"destroy",value:function(){delete this.fontInstalledMap}},{key:"isFontInstalled",value:function(a){return Object.prototype.hasOwnProperty.call(this.fontInstalledMap,a)||(this.fontInstalledMap[a]=Vc.isFontInstalled(a)||Yc.contains(this.options.fontNamesIgnoreCheck,a)),this.fontInstalledMap[a]}},{key:"isFontDeservedToAdd",value:function(a){return""!==(a=a.toLowerCase())&&this.isFontInstalled(a)&&-1===Vc.genericFontFamilies.indexOf(a)}},{key:"colorPalette",value:function(a,b,c,d){var e=this;return this.ui.buttonGroup({className:"note-color "+a,children:[this.button({className:"note-current-color-button",contents:this.ui.icon(this.options.icons.font+" note-recent-color"),tooltip:b,click:function(a){var b=Lc()(a.currentTarget);c&&d?e.context.invoke("editor.color",{backColor:b.attr("data-backColor"),foreColor:b.attr("data-foreColor")}):c?e.context.invoke("editor.color",{backColor:b.attr("data-backColor")}):d&&e.context.invoke("editor.color",{foreColor:b.attr("data-foreColor")})},callback:function(a){var b=a.find(".note-recent-color");c&&(b.css("background-color",e.options.colorButton.backColor),a.attr("data-backColor",e.options.colorButton.backColor)),d?(b.css("color",e.options.colorButton.foreColor),a.attr("data-foreColor",e.options.colorButton.foreColor)):b.css("color","transparent")}}),this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents("",this.options),tooltip:this.lang.color.more,data:{toggle:"dropdown"}}),this.ui.dropdown({items:(c?['<div class="note-palette">','<div class="note-palette-title">'+this.lang.color.background+"</div>","<div>",'<button type="button" class="note-color-reset btn btn-light btn-default" data-event="backColor" data-value="transparent">',this.lang.color.transparent,"</button>","</div>",'<div class="note-holder" data-event="backColor">\x3c!-- back colors --\x3e</div>',"<div>",'<button type="button" class="note-color-select btn btn-light btn-default" data-event="openPalette" data-value="backColorPicker">',this.lang.color.cpSelect,"</button>",'<input type="color" id="backColorPicker" class="note-btn note-color-select-btn" value="'+this.options.colorButton.backColor+'" data-event="backColorPalette">',"</div>",'<div class="note-holder-custom" id="backColorPalette" data-event="backColor"></div>',"</div>"].join(""):"")+(d?['<div class="note-palette">','<div class="note-palette-title">'+this.lang.color.foreground+"</div>","<div>",'<button type="button" class="note-color-reset btn btn-light btn-default" data-event="removeFormat" data-value="foreColor">',this.lang.color.resetToDefault,"</button>","</div>",'<div class="note-holder" data-event="foreColor">\x3c!-- fore colors --\x3e</div>',"<div>",'<button type="button" class="note-color-select btn btn-light btn-default" data-event="openPalette" data-value="foreColorPicker">',this.lang.color.cpSelect,"</button>",'<input type="color" id="foreColorPicker" class="note-btn note-color-select-btn" value="'+this.options.colorButton.foreColor+'" data-event="foreColorPalette">',"</div>",'<div class="note-holder-custom" id="foreColorPalette" data-event="foreColor"></div>',"</div>"].join(""):""),callback:function(a){a.find(".note-holder").each(function(a,b){var c=Lc()(b);c.append(e.ui.palette({colors:e.options.colors,colorsName:e.options.colorsName,eventName:c.data("event"),container:e.options.container,tooltip:e.options.tooltip}).render())});var b=[["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"]];a.find(".note-holder-custom").each(function(a,c){var d=Lc()(c);d.append(e.ui.palette({colors:b,colorsName:b,eventName:d.data("event"),container:e.options.container,tooltip:e.options.tooltip}).render())}),a.find("input[type=color]").each(function(b,c){Lc()(c).change(function(){var b=a.find("#"+Lc()(this).data("event")).find(".note-color-btn").first(),c=this.value.toUpperCase();b.css("background-color",c).attr("aria-label",c).attr("data-value",c).attr("data-original-title",c),b.click()})})},click:function(b){b.stopPropagation();var c=Lc()("."+a).find(".note-dropdown-menu"),d=Lc()(b.target),f=d.data("event"),g=d.attr("data-value");if("openPalette"===f){var h=c.find("#"+g),i=Lc()(c.find("#"+h.data("event")).find(".note-color-row")[0]),j=i.find(".note-color-btn").last().detach(),k=h.val();j.css("background-color",k).attr("aria-label",k).attr("data-value",k).attr("data-original-title",k),i.prepend(j),h.click()}else{if(Yc.contains(["backColor","foreColor"],f)){var l="backColor"===f?"background-color":"color",m=d.closest(".note-color").find(".note-recent-color"),n=d.closest(".note-color").find(".note-current-color-button");m.css(l,g),n.attr("data-"+f,g)}e.context.invoke("editor."+f,g)}}})]}).render()}},{key:"addToolbarButtons",value:function(){var a=this;this.context.memo("button.style",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.magic),a.options),tooltip:a.lang.style.style,data:{toggle:"dropdown"}}),a.ui.dropdown({className:"dropdown-style",items:a.options.styleTags,title:a.lang.style.style,template:function(b){"string"==typeof b&&(b={tag:b,title:Object.prototype.hasOwnProperty.call(a.lang.style,b)?a.lang.style[b]:b});var c=b.tag,d=b.title;return"<"+c+(b.style?' style="'+b.style+'" ':"")+(b.className?' class="'+b.className+'"':"")+">"+d+"</"+c+">"},click:a.context.createInvokeHandler("editor.formatBlock")})]).render()});for(var b=0,c=this.options.styleTags.length;b<c;b++)!function(b,c){var d=a.options.styleTags[b]
;a.context.memo("button.style."+d,function(){return a.button({className:"note-btn-style-"+d,contents:'<div data-value="'+d+'">'+d.toUpperCase()+"</div>",tooltip:a.lang.style[d],click:a.context.createInvokeHandler("editor.formatBlock")}).render()})}(b);this.context.memo("button.bold",function(){return a.button({className:"note-btn-bold",contents:a.ui.icon(a.options.icons.bold),tooltip:a.lang.font.bold+a.representShortcut("bold"),click:a.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()}),this.context.memo("button.italic",function(){return a.button({className:"note-btn-italic",contents:a.ui.icon(a.options.icons.italic),tooltip:a.lang.font.italic+a.representShortcut("italic"),click:a.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()}),this.context.memo("button.underline",function(){return a.button({className:"note-btn-underline",contents:a.ui.icon(a.options.icons.underline),tooltip:a.lang.font.underline+a.representShortcut("underline"),click:a.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()}),this.context.memo("button.clear",function(){return a.button({contents:a.ui.icon(a.options.icons.eraser),tooltip:a.lang.font.clear+a.representShortcut("removeFormat"),click:a.context.createInvokeHandler("editor.removeFormat")}).render()}),this.context.memo("button.strikethrough",function(){return a.button({className:"note-btn-strikethrough",contents:a.ui.icon(a.options.icons.strikethrough),tooltip:a.lang.font.strikethrough+a.representShortcut("strikethrough"),click:a.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()}),this.context.memo("button.superscript",function(){return a.button({className:"note-btn-superscript",contents:a.ui.icon(a.options.icons.superscript),tooltip:a.lang.font.superscript,click:a.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()}),this.context.memo("button.subscript",function(){return a.button({className:"note-btn-subscript",contents:a.ui.icon(a.options.icons.subscript),tooltip:a.lang.font.subscript,click:a.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()}),this.context.memo("button.fontname",function(){var b=a.context.invoke("editor.currentStyle");return a.options.addDefaultFonts&&Lc.a.each(b["font-family"].split(","),function(b,c){c=c.trim().replace(/['"]+/g,""),a.isFontDeservedToAdd(c)&&-1===a.options.fontNames.indexOf(c)&&a.options.fontNames.push(c)}),a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents('<span class="note-current-fontname"></span>',a.options),tooltip:a.lang.font.name,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:a.options.icons.menuCheck,items:a.options.fontNames.filter(a.isFontInstalled.bind(a)),title:a.lang.font.name,template:function(a){return'<span style="font-family: '+Vc.validFontName(a)+'">'+a+"</span>"},click:a.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()}),this.context.memo("button.fontsize",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents('<span class="note-current-fontsize"></span>',a.options),tooltip:a.lang.font.size,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:a.options.icons.menuCheck,items:a.options.fontSizes,title:a.lang.font.size,click:a.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()}),this.context.memo("button.fontsizeunit",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents('<span class="note-current-fontsizeunit"></span>',a.options),tooltip:a.lang.font.sizeunit,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({className:"dropdown-fontsizeunit",checkClassName:a.options.icons.menuCheck,items:a.options.fontSizeUnits,title:a.lang.font.sizeunit,click:a.context.createInvokeHandlerAndUpdateState("editor.fontSizeUnit")})]).render()}),this.context.memo("button.color",function(){return a.colorPalette("note-color-all",a.lang.color.recent,!0,!0)}),this.context.memo("button.forecolor",function(){return a.colorPalette("note-color-fore",a.lang.color.foreground,!1,!0)}),this.context.memo("button.backcolor",function(){return a.colorPalette("note-color-back",a.lang.color.background,!0,!1)}),this.context.memo("button.ul",function(){return a.button({contents:a.ui.icon(a.options.icons.unorderedlist),tooltip:a.lang.lists.unordered+a.representShortcut("insertUnorderedList"),click:a.context.createInvokeHandler("editor.insertUnorderedList")}).render()}),this.context.memo("button.ol",function(){return a.button({contents:a.ui.icon(a.options.icons.orderedlist),tooltip:a.lang.lists.ordered+a.representShortcut("insertOrderedList"),click:a.context.createInvokeHandler("editor.insertOrderedList")}).render()});var d=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),e=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),f=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),g=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),h=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),i=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",Xc.invoke(d,"render")),this.context.memo("button.justifyCenter",Xc.invoke(e,"render")),this.context.memo("button.justifyRight",Xc.invoke(f,"render")),this.context.memo("button.justifyFull",Xc.invoke(g,"render")),this.context.memo("button.outdent",Xc.invoke(h,"render")),this.context.memo("button.indent",Xc.invoke(i,"render")),this.context.memo("button.paragraph",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.alignLeft),a.options),tooltip:a.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),a.ui.dropdown([a.ui.buttonGroup({className:"note-align",children:[d,e,f,g]}),a.ui.buttonGroup({className:"note-list",children:[h,i]})])]).render()}),this.context.memo("button.height",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.textHeight),a.options),tooltip:a.lang.font.height,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({items:a.options.lineHeights,checkClassName:a.options.icons.menuCheck,className:"dropdown-line-height",title:a.lang.font.height,click:a.context.createInvokeHandler("editor.lineHeight")})]).render()}),this.context.memo("button.table",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.table),a.options),tooltip:a.lang.table.table,data:{toggle:"dropdown"}}),a.ui.dropdown({title:a.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>','<div class="note-dimension-picker-highlighted"></div>','<div class="note-dimension-picker-unhighlighted"></div>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(b){b.find(".note-dimension-picker-mousecatcher").css({width:a.options.insertTableMaxSize.col+"em",height:a.options.insertTableMaxSize.row+"em"}).mousedown(a.context.createInvokeHandler("editor.insertTable")).on("mousemove",a.tableMoveHandler.bind(a))}}).render()}),this.context.memo("button.link",function(){return a.button({contents:a.ui.icon(a.options.icons.link),tooltip:a.lang.link.link+a.representShortcut("linkDialog.show"),click:a.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.picture",function(){return a.button({contents:a.ui.icon(a.options.icons.picture),tooltip:a.lang.image.image,click:a.context.createInvokeHandler("imageDialog.show")}).render()}),this.context.memo("button.video",function(){return a.button({contents:a.ui.icon(a.options.icons.video),tooltip:a.lang.video.video,click:a.context.createInvokeHandler("videoDialog.show")}).render()}),this.context.memo("button.hr",function(){return a.button({contents:a.ui.icon(a.options.icons.minus),tooltip:a.lang.hr.insert+a.representShortcut("insertHorizontalRule"),click:a.context.createInvokeHandler("editor.insertHorizontalRule")}).render()}),this.context.memo("button.fullscreen",function(){return a.button({className:"btn-fullscreen note-codeview-keep",contents:a.ui.icon(a.options.icons.arrowsAlt),tooltip:a.lang.options.fullscreen,click:a.context.createInvokeHandler("fullscreen.toggle")}).render()}),this.context.memo("button.codeview",function(){return a.button({className:"btn-codeview note-codeview-keep",contents:a.ui.icon(a.options.icons.code),tooltip:a.lang.options.codeview,click:a.context.createInvokeHandler("codeview.toggle")}).render()}),this.context.memo("button.redo",function(){return a.button({contents:a.ui.icon(a.options.icons.redo),tooltip:a.lang.history.redo+a.representShortcut("redo"),click:a.context.createInvokeHandler("editor.redo")}).render()}),this.context.memo("button.undo",function(){return a.button({contents:a.ui.icon(a.options.icons.undo),tooltip:a.lang.history.undo+a.representShortcut("undo"),click:a.context.createInvokeHandler("editor.undo")}).render()}),this.context.memo("button.help",function(){return a.button({contents:a.ui.icon(a.options.icons.question),tooltip:a.lang.options.help,click:a.context.createInvokeHandler("helpDialog.show")}).render()})}},{key:"addImagePopoverButtons",value:function(){var a=this;this.context.memo("button.resizeFull",function(){return a.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:a.lang.image.resizeFull,click:a.context.createInvokeHandler("editor.resize","1")}).render()}),this.context.memo("button.resizeHalf",function(){return a.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:a.lang.image.resizeHalf,click:a.context.createInvokeHandler("editor.resize","0.5")}).render()}),this.context.memo("button.resizeQuarter",function(){return a.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:a.lang.image.resizeQuarter,click:a.context.createInvokeHandler("editor.resize","0.25")}).render()}),this.context.memo("button.resizeNone",function(){return a.button({contents:a.ui.icon(a.options.icons.rollback),tooltip:a.lang.image.resizeNone,click:a.context.createInvokeHandler("editor.resize","0")}).render()}),this.context.memo("button.floatLeft",function(){return a.button({contents:a.ui.icon(a.options.icons.floatLeft),tooltip:a.lang.image.floatLeft,click:a.context.createInvokeHandler("editor.floatMe","left")}).render()}),this.context.memo("button.floatRight",function(){return a.button({contents:a.ui.icon(a.options.icons.floatRight),tooltip:a.lang.image.floatRight,click:a.context.createInvokeHandler("editor.floatMe","right")}).render()}),this.context.memo("button.floatNone",function(){return a.button({contents:a.ui.icon(a.options.icons.rollback),tooltip:a.lang.image.floatNone,click:a.context.createInvokeHandler("editor.floatMe","none")}).render()}),this.context.memo("button.removeMedia",function(){return a.button({contents:a.ui.icon(a.options.icons.trash),tooltip:a.lang.image.remove,click:a.context.createInvokeHandler("editor.removeMedia")}).render()})}},{key:"addLinkPopoverButtons",value:function(){var a=this;this.context.memo("button.linkDialogShow",function(){return a.button({contents:a.ui.icon(a.options.icons.link),tooltip:a.lang.link.edit,click:a.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.unlink",function(){return a.button({contents:a.ui.icon(a.options.icons.unlink),tooltip:a.lang.link.unlink,click:a.context.createInvokeHandler("editor.unlink")}).render()})}},{key:"addTablePopoverButtons",value:function(){var a=this;this.context.memo("button.addRowUp",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.rowAbove),tooltip:a.lang.table.addRowAbove,click:a.context.createInvokeHandler("editor.addRow","top")}).render()}),this.context.memo("button.addRowDown",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.rowBelow),tooltip:a.lang.table.addRowBelow,click:a.context.createInvokeHandler("editor.addRow","bottom")}).render()}),this.context.memo("button.addColLeft",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.colBefore),tooltip:a.lang.table.addColLeft,click:a.context.createInvokeHandler("editor.addCol","left")}).render()}),this.context.memo("button.addColRight",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.colAfter),tooltip:a.lang.table.addColRight,click:a.context.createInvokeHandler("editor.addCol","right")}).render()}),this.context.memo("button.deleteRow",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.rowRemove),tooltip:a.lang.table.delRow,click:a.context.createInvokeHandler("editor.deleteRow")}).render()}),this.context.memo("button.deleteCol",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.colRemove),tooltip:a.lang.table.delCol,click:a.context.createInvokeHandler("editor.deleteCol")}).render()}),this.context.memo("button.deleteTable",function(){return a.button({className:"btn-md",contents:a.ui.icon(a.options.icons.trash),tooltip:a.lang.table.delTable,click:a.context.createInvokeHandler("editor.deleteTable")}).render()})}},{key:"build",value:function(a,b){for(var c=0,d=b.length;c<d;c++){for(var e=b[c],f=Array.isArray(e)?e[0]:e,g=Array.isArray(e)?1===e.length?[e[0]]:e[1]:[e],h=this.ui.buttonGroup({className:"note-"+f}).render(),i=0,j=g.length;i<j;i++){var k=this.context.memo("button."+g[i]);k&&h.append("function"==typeof k?k(this.context):k)}h.appendTo(a)}}},{key:"updateCurrentStyle",value:function(a){var b=this,c=a||this.$toolbar,d=this.context.invoke("editor.currentStyle");if(this.updateBtnStates(c,{".note-btn-bold":function(){return"bold"===d["font-bold"]},".note-btn-italic":function(){return"italic"===d["font-italic"]},".note-btn-underline":function(){return"underline"===d["font-underline"]},".note-btn-subscript":function(){return"subscript"===d["font-subscript"]},".note-btn-superscript":function(){return"superscript"===d["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===d["font-strikethrough"]}}),d["font-family"]){var e=d["font-family"].split(",").map(function(a){return a.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),f=Yc.find(e,this.isFontInstalled.bind(this));c.find(".dropdown-fontname a").each(function(a,b){var c=Lc()(b),d=c.data("value")+""==f+"";c.toggleClass("checked",d)}),c.find(".note-current-fontname").text(f).css("font-family",f)}if(d["font-size"]){var g=d["font-size"];c.find(".dropdown-fontsize a").each(function(a,b){var c=Lc()(b),d=c.data("value")+""==g+"";c.toggleClass("checked",d)}),c.find(".note-current-fontsize").text(g);var h=d["font-size-unit"];c.find(".dropdown-fontsizeunit a").each(function(a,b){var c=Lc()(b),d=c.data("value")+""==h+"";c.toggleClass("checked",d)}),c.find(".note-current-fontsizeunit").text(h)}if(d["line-height"]){var i=d["line-height"];c.find(".dropdown-line-height li a").each(function(a,c){var d=Lc()(c).data("value")+""==i+"";b.className=d?"checked":""})}}},{key:"updateBtnStates",value:function(a,b){var c=this;Lc.a.each(b,function(b,d){c.ui.toggleBtnActive(a.find(b),d())})}},{key:"tableMoveHandler",value:function(a){var b,c=Lc()(a.target.parentNode),d=c.next(),e=c.find(".note-dimension-picker-mousecatcher"),f=c.find(".note-dimension-picker-highlighted"),g=c.find(".note-dimension-picker-unhighlighted");if(void 0===a.offsetX){var h=Lc()(a.target).offset();b={x:a.pageX-h.left,y:a.pageY-h.top}}else b={x:a.offsetX,y:a.offsetY};var i={c:Math.ceil(b.x/18)||1,r:Math.ceil(b.y/18)||1};f.css({width:i.c+"em",height:i.r+"em"}),e.data("value",i.c+"x"+i.r),i.c>3&&i.c<this.options.insertTableMaxSize.col&&g.css({width:i.c+1+"em"}),i.r>3&&i.r<this.options.insertTableMaxSize.row&&g.css({height:i.r+1+"em"}),d.html(i.c+" x "+i.r)}}]),a}(),Hd=function(){function a(b){gc(this,a),this.context=b,this.$window=Lc()(window),this.$document=Lc()(document),this.ui=Lc.a.summernote.ui,this.$note=b.layoutInfo.note,this.$editor=b.layoutInfo.editor,this.$toolbar=b.layoutInfo.toolbar,this.$editable=b.layoutInfo.editable,this.$statusbar=b.layoutInfo.statusbar,this.options=b.options,this.isFollowing=!1,this.followScroll=this.followScroll.bind(this)}return ic(a,[{key:"shouldInitialize",value:function(){return!this.options.airMode}},{key:"initialize",value:function(){var a=this;this.options.toolbar=this.options.toolbar||[],this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide(),this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.changeContainer(!1),this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){a.context.invoke("buttons.updateCurrentStyle")}),this.context.invoke("buttons.updateCurrentStyle"),this.options.followingToolbar&&this.$window.on("scroll resize",this.followScroll)}},{key:"destroy",value:function(){this.$toolbar.children().remove(),this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)}},{key:"followScroll",value:function(){if(this.$editor.hasClass("fullscreen"))return!1;var a=this.$editor.outerHeight(),b=this.$editor.width(),c=this.$toolbar.height(),d=this.$statusbar.height(),e=0;this.options.otherStaticBar&&(e=Lc()(this.options.otherStaticBar).outerHeight());var f=this.$document.scrollTop(),g=this.$editor.offset().top,h=g+a,i=g-e,j=h-e-c-d;!this.isFollowing&&f>i&&f<j-c?(this.isFollowing=!0,this.$editable.css({marginTop:this.$toolbar.outerHeight()}),this.$toolbar.css({position:"fixed",top:e,width:b,zIndex:1e3})):this.isFollowing&&(f<i||f>j)&&(this.isFollowing=!1,this.$toolbar.css({position:"relative",top:0,width:"100%",zIndex:"auto"}),this.$editable.css({marginTop:""}))}},{key:"changeContainer",value:function(a){a?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.options.followingToolbar&&this.followScroll()}},{key:"updateFullscreen",value:function(a){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),a),this.changeContainer(a)}},{key:"updateCodeview",value:function(a){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),a),a?this.deactivate():this.activate()}},{key:"activate",value:function(a){var b=this.$toolbar.find("button");a||(b=b.not(".note-codeview-keep")),this.ui.toggleBtn(b,!0)}},{key:"deactivate",value:function(a){var b=this.$toolbar.find("button");a||(b=b.not(".note-codeview-keep")),this.ui.toggleBtn(b,!1)}}]),a}(),Id=function(){function a(b){jc(this,a),this.context=b,this.ui=Lc.a.summernote.ui,this.$body=Lc()(document.body),this.$editor=b.layoutInfo.editor,this.options=b.options,this.lang=this.options.langInfo,b.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}return lc(a,[{key:"initialize",value:function(){var a=this.options.dialogsInBody?this.$body:this.options.container,b=['<div class="form-group note-form-group">','<label for="note-dialog-link-txt-'.concat(this.options.id,'" class="note-form-label">').concat(this.lang.link.textToDisplay,"</label>"),'<input id="note-dialog-link-txt-'.concat(this.options.id,'" class="note-link-text form-control note-form-control note-input" type="text"/>'),"</div>",'<div class="form-group note-form-group">','<label for="note-dialog-link-url-'.concat(this.options.id,'" class="note-form-label">').concat(this.lang.link.url,"</label>"),'<input id="note-dialog-link-url-'.concat(this.options.id,'" class="note-link-url form-control note-form-control note-input" type="text" value="http://"/>'),"</div>",'<div class="text-center">'.concat(this.lang.link_extend.or,"</div>"),'<div class="form-group note-form-group">','<label for="note-dialog-link-cms-'.concat(this.options.id,'" class="note-form-label">').concat(this.lang.link_extend.cms,"</label>"),'<input id="note-dialog-link-cms-'.concat(this.options.id,'" class="note-link-cms form-control note-form-control note-input" type="text" value=""/>'),"</div>",this.options.disableLinkTarget?"":Lc()("<div/>").append(this.ui.checkbox({className:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html(),Lc()("<div/>").append(this.ui.checkbox({className:"sn-checkbox-use-protocol",text:this.lang.link.useProtocol,checked:!0}).render()).html()].join(""),c='<input type="button" href="#" class="'.concat("btn btn-primary note-btn note-btn-primary note-link-btn",'" value="').concat(this.lang.link.insert,'" disabled>');this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:b,footer:c}).render().appendTo(a)}},{key:"destroy",value:function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}},{key:"bindEnterKey",value:function(a,b){a.on("keypress",function(a){a.keyCode===nd.code.ENTER&&(a.preventDefault(),b.trigger("click"))})}},{key:"toggleLinkBtn",value:function(a,b,c,d){this.ui.toggleBtn(a,b.val()&&(c.val()||d.val()))}},{key:"showLinkDialog",value:function(a){var b=this;return Lc.a.Deferred(function(c){var d=b.$dialog.find(".note-link-text"),e=b.$dialog.find(".note-link-url"),f=b.$dialog.find(".note-link-cms"),g=b.$dialog.find(".note-link-btn"),h=b.$dialog.find(".sn-checkbox-open-in-new-window input[type=checkbox]"),i=b.$dialog.find(".sn-checkbox-use-protocol input[type=checkbox]");b.ui.onDialogShown(b.$dialog,function(){b.context.triggerEvent("dialog.shown"),!a.url&&Xc.isValidUrl(a.text)&&(a.url=a.text),d.on("input paste propertychange",function(){a.text=d.val(),b.toggleLinkBtn(g,d,e,f)}).val(a.text),e.on("input paste propertychange",function(){a.text||d.val(e.val()),b.toggleLinkBtn(g,d,e,f)}).val(a.url),f.on("input paste propertychange",function(){b.toggleLinkBtn(g,d,e,f)}).val(a.cms),Vc.isSupportTouch||e.trigger("focus"),b.toggleLinkBtn(g,d,e,f),b.bindEnterKey(e,g),b.bindEnterKey(d,g),b.bindEnterKey(f,g);var j=void 0!==a.isNewWindow?a.isNewWindow:b.context.options.linkTargetBlank;h.prop("checked",j);var k=!a.url&&b.context.options.useProtocol;i.prop("checked",k),g.one("click",function(g){g.preventDefault(),c.resolve({range:a.range,url:e.val(),text:d.val(),cms:f.val(),isNewWindow:h.is(":checked"),checkProtocol:i.is(":checked")}),b.ui.hideDialog(b.$dialog)})}),b.ui.onDialogHidden(b.$dialog,function(){d.off(),e.off(),f.off(),g.off(),"pending"===c.state()&&c.reject()}),b.ui.showDialog(b.$dialog)}).promise()}},{key:"show",value:function(){var a=this,b=this.context.invoke("editor.getLinkInfo");/^\[{oxgetseourl/.test(b.url)&&(b.cms=/ident="([^"]*)"/g.exec(b.url)[1],b.url=""),/^\{{ seo_url/.test(b.url)&&(b.cms=/ident: '([^']*)'/g.exec(b.url)[1],b.url=""),this.context.invoke("editor.saveRange"),this.showLinkDialog(b).then(function(b){a.context.invoke("editor.restoreRange"),a.context.invoke("editor.createLink",b)}).fail(function(){a.context.invoke("editor.restoreRange")})}}]),a}(),Jd=function(){function a(b){var c=this;mc(this,a),this.context=b,this.ui=Lc.a.summernote.ui,this.options=b.options,this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){c.update()},"summernote.disable summernote.dialog.shown summernote.blur":function(){c.hide()}}}return oc(a,[{key:"shouldInitialize",value:function(){return!Yc.isEmpty(this.options.popover.link)}},{key:"initialize",value:function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(a){a.find(".popover-content,.note-popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var a=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",a,this.options.popover.link),this.$popover.on("mousedown",function(a){a.preventDefault()})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"update",value:function(){if(!this.context.invoke("editor.hasFocus"))return void this.hide();var a=this.context.invoke("editor.getLastRange");if(a.isCollapsed()&&a.isOnAnchor()){var b=id.ancestor(a.sc,id.isAnchor),c=Lc()(b).attr("href");this.$popover.find("a").attr("href",c).text(c);var d=id.posFromPlaceholder(b),e=Lc()(this.options.container).offset();d.top-=e.top,d.left-=e.left,this.$popover.css({display:"block",left:d.left,top:d.top})}else this.hide()}},{key:"hide",value:function(){this.$popover.hide()}}]),a}(),Kd=function(){function a(b){pc(this,a),this.context=b,this.ui=Lc.a.summernote.ui,this.$body=Lc()(document.body),this.$editor=b.layoutInfo.editor,this.options=b.options,this.lang=this.options.langInfo}return rc(a,[{key:"initialize",value:function(){var a="";if(this.options.maximumImageFileSize){var b=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024)),c=1*(this.options.maximumImageFileSize/Math.pow(1024,b)).toFixed(2)+" "+" KMGTP"[b]+"B";a="<small>".concat(this.lang.image.maximumFileSize+" : "+c,"</small>")}var d=this.options.dialogsInBody?this.$body:this.options.container,e=['<div class="form-group note-form-group note-group-select-from-files">','<label for="note-dialog-image-file-'+this.options.id+'" class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",'<input id="note-dialog-image-file-'+this.options.id+'" class="note-image-input form-control-file note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple"/>',a,"</div>",'<div class="form-group note-group-image-url">','<label for="note-dialog-image-url-'+this.options.id+'" class="note-form-label">'+this.lang.image.url+"</label>",'<input id="note-dialog-image-url-'+this.options.id+'" class="note-image-url form-control note-form-control note-input" type="text"/>',"</div>"].join(""),f='<input type="button" href="#" class="'.concat("btn btn-primary note-btn note-btn-primary note-image-btn",'" value="').concat(this.lang.image.insert,'" disabled>');this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:e,footer:f}).render().appendTo(d)}},{key:"destroy",value:function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}},{key:"bindEnterKey",value:function(a,b){a.on("keypress",function(a){a.keyCode===nd.code.ENTER&&(a.preventDefault(),b.trigger("click"))})}},{key:"show",value:function(){var a=this;this.context.invoke("editor.saveRange"),this.showImageDialog().then(function(b){a.ui.hideDialog(a.$dialog),a.context.invoke("editor.restoreRange"),"string"==typeof b?a.options.callbacks.onImageLinkInsert?a.context.triggerEvent("image.link.insert",b):a.context.invoke("editor.insertImage",b):a.context.invoke("editor.insertImagesOrCallback",b)}).fail(function(){a.context.invoke("editor.restoreRange")})}},{key:"showImageDialog",value:function(){var a=this;return Lc.a.Deferred(function(b){var c=a.$dialog.find(".note-image-input"),d=a.$dialog.find(".note-image-url"),e=a.$dialog.find(".note-image-btn");a.ui.onDialogShown(a.$dialog,function(){a.context.triggerEvent("dialog.shown"),c.replaceWith(c.clone().on("change",function(a){b.resolve(a.target.files||a.target.value)}).val("")),d.on("input paste propertychange",function(){a.ui.toggleBtn(e,d.val())}).val(""),Vc.isSupportTouch||d.trigger("focus"),e.click(function(a){a.preventDefault(),b.resolve(d.val())}),a.bindEnterKey(d,e)}),a.ui.onDialogHidden(a.$dialog,function(){c.off(),d.off(),e.off(),"pending"===b.state()&&b.reject()}),a.ui.showDialog(a.$dialog)})}}]),a}(),Ld=function(){function a(b){var c=this;sc(this,a),this.context=b,this.ui=Lc.a.summernote.ui,this.editable=b.layoutInfo.editable[0],this.options=b.options,this.events={"summernote.disable summernote.blur":function(){c.hide()}}}return uc(a,[{key:"shouldInitialize",value:function(){return!Yc.isEmpty(this.options.popover.image)}},{key:"initialize",value:function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var a=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",a,this.options.popover.image),this.$popover.on("mousedown",function(a){a.preventDefault()})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"update",value:function(a,b){if(id.isImg(a)){var c=Lc()(a).offset(),d=Lc()(this.options.container).offset(),e={};this.options.popatmouse?(e.left=b.pageX-20,e.top=b.pageY):e=c,e.top-=d.top,e.left-=d.left,this.$popover.css({display:"block",left:e.left,top:e.top})}else this.hide()}},{key:"hide",value:function(){this.$popover.hide()}}]),a}(),Md=function(){function a(b){var c=this;vc(this,a),this.context=b,this.ui=Lc.a.summernote.ui,this.options=b.options,this.events={"summernote.mousedown":function(a,b){c.update(b.target)},"summernote.keyup summernote.scroll summernote.change":function(){c.update()},"summernote.disable summernote.blur":function(){c.hide()}}}return xc(a,[{key:"shouldInitialize",value:function(){return!Yc.isEmpty(this.options.popover.table)}},{key:"initialize",value:function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var a=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",a,this.options.popover.table),Vc.isFF&&document.execCommand("enableInlineTableEditing",!1,!1),this.$popover.on("mousedown",function(a){a.preventDefault()})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"update",value:function(a){if(this.context.isDisabled())return!1;var b=id.isCell(a);if(b){var c=id.posFromPlaceholder(a),d=Lc()(this.options.container).offset();c.top-=d.top,c.left-=d.left,this.$popover.css({display:"block",left:c.left,top:c.top})}else this.hide();return b}},{key:"hide",value:function(){this.$popover.hide()}}]),a}(),Nd=function(){function a(b){yc(this,a),this.context=b,this.ui=Lc.a.summernote.ui,this.$body=Lc()(document.body),this.$editor=b.layoutInfo.editor,this.options=b.options,this.lang=this.options.langInfo}return Ac(a,[{key:"initialize",value:function(){var a=this.options.dialogsInBody?this.$body:this.options.container,b=['<div class="form-group note-form-group row-fluid">','<label for="note-dialog-video-url-'.concat(this.options.id,'" class="note-form-label">').concat(this.lang.video.url,' <small class="text-muted">').concat(this.lang.video.providers,"</small></label>"),'<input id="note-dialog-video-url-'.concat(this.options.id,'" class="note-video-url form-control note-form-control note-input" type="text"/>'),"</div>"].join(""),c='<input type="button" href="#" class="'.concat("btn btn-primary note-btn note-btn-primary note-video-btn",'" value="').concat(this.lang.video.insert,'" disabled>');this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:b,footer:c}).render().appendTo(a)}},{key:"destroy",value:function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}},{key:"bindEnterKey",value:function(a,b){a.on("keypress",function(a){a.keyCode===nd.code.ENTER&&(a.preventDefault(),b.trigger("click"))})}},{key:"createVideoNode",value:function(a){
var b,c=/\/\/(?:(?:www|m)\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/,d=/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/,e=a.match(c),f=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/,g=a.match(f),h=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/,i=a.match(h),j=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/,k=a.match(j),l=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,m=a.match(l),n=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,o=a.match(n),p=/\/\/v\.qq\.com.*?vid=(.+)/,q=a.match(p),r=/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/,s=a.match(r),t=/^.+.(mp4|m4v)$/,u=a.match(t),v=/^.+.(ogg|ogv)$/,w=a.match(v),x=/^.+.(webm)$/,y=a.match(x),z=/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/,A=a.match(z);if(e&&11===e[1].length){var B=e[1],C=0;if(void 0!==e[2]){var D=e[2].match(d);if(D)for(var E=[3600,60,1],F=0,G=E.length;F<G;F++)C+=void 0!==D[F+1]?E[F]*parseInt(D[F+1],10):0}b=Lc()("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+B+(C>0?"?start="+C:"")).attr("width","640").attr("height","360")}else if(g&&g[0].length)b=Lc()("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+g[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(i&&i[0].length)b=Lc()("<iframe>").attr("frameborder",0).attr("src",i[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(k&&k[3].length)b=Lc()("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+k[3]).attr("width","640").attr("height","360");else if(m&&m[2].length)b=Lc()("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+m[2]).attr("width","640").attr("height","360");else if(o&&o[1].length)b=Lc()("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+o[1]);else if(q&&q[1].length||s&&s[2].length){var H=q&&q[1].length?q[1]:s[2];b=Lc()("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","https://v.qq.com/txp/iframe/player.html?vid="+H+"&amp;auto=0")}else if(u||w||y)b=Lc()("<video controls>").attr("src",a).attr("width","640").attr("height","360");else{if(!A||!A[0].length)return!1;b=Lc()("<iframe>").attr("frameborder",0).attr("src","https://www.facebook.com/plugins/video.php?href="+encodeURIComponent(A[0])+"&show_text=0&width=560").attr("width","560").attr("height","301").attr("scrolling","no").attr("allowtransparency","true")}return b.addClass("note-video-clip"),b[0]}},{key:"show",value:function(){var a=this,b=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange"),this.showVideoDialog(b).then(function(b){a.ui.hideDialog(a.$dialog),a.context.invoke("editor.restoreRange");var c=a.createVideoNode(b);c&&a.context.invoke("editor.insertNode",c)}).fail(function(){a.context.invoke("editor.restoreRange")})}},{key:"showVideoDialog",value:function(){var a=this;return Lc.a.Deferred(function(b){var c=a.$dialog.find(".note-video-url"),d=a.$dialog.find(".note-video-btn");a.ui.onDialogShown(a.$dialog,function(){a.context.triggerEvent("dialog.shown"),c.on("input paste propertychange",function(){a.ui.toggleBtn(d,c.val())}),Vc.isSupportTouch||c.trigger("focus"),d.click(function(a){a.preventDefault(),b.resolve(c.val())}),a.bindEnterKey(c,d)}),a.ui.onDialogHidden(a.$dialog,function(){c.off(),d.off(),"pending"===b.state()&&b.reject()}),a.ui.showDialog(a.$dialog)})}}]),a}(),Od=function(){function a(b){Bc(this,a),this.context=b,this.ui=Lc.a.summernote.ui,this.$body=Lc()(document.body),this.$editor=b.layoutInfo.editor,this.options=b.options,this.lang=this.options.langInfo}return Dc(a,[{key:"initialize",value:function(){var a=this.options.dialogsInBody?this.$body:this.options.container,b=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.18</a> · ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a> · ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:b,callback:function(a){a.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(a)}},{key:"destroy",value:function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}},{key:"createShortcutList",value:function(){var a=this,b=this.options.keyMap[Vc.isMac?"mac":"pc"];return Object.keys(b).map(function(c){var d=b[c],e=Lc()('<div><div class="help-list-item"></div></div>');return e.append(Lc()("<label><kbd>"+c+"</kdb></label>").css({width:180,"margin-right":10})).append(Lc()("<span/>").html(a.context.memo("help."+d)||d)),e.html()}).join("")}},{key:"showHelpDialog",value:function(){var a=this;return Lc.a.Deferred(function(b){a.ui.onDialogShown(a.$dialog,function(){a.context.triggerEvent("dialog.shown"),b.resolve()}),a.ui.showDialog(a.$dialog)}).promise()}},{key:"show",value:function(){var a=this;this.context.invoke("editor.saveRange"),this.showHelpDialog().then(function(){a.context.invoke("editor.restoreRange")})}}]),a}(),Pd=function(){function a(b){var c=this;Ec(this,a),this.context=b,this.ui=Lc.a.summernote.ui,this.options=b.options,this.hidable=!0,this.onContextmenu=!1,this.pageX=null,this.pageY=null,this.events={"summernote.contextmenu":function(a){c.options.editing&&(a.preventDefault(),a.stopPropagation(),c.onContextmenu=!0,c.update(!0))},"summernote.mousedown":function(a,b){c.pageX=b.pageX,c.pageY=b.pageY},"summernote.keyup summernote.mouseup summernote.scroll":function(a,b){c.options.editing&&!c.onContextmenu&&(c.pageX=b.pageX,c.pageY=b.pageY,c.update()),c.onContextmenu=!1},"summernote.disable summernote.change summernote.dialog.shown summernote.blur":function(){c.hide()},"summernote.focusout":function(){c.$popover.is(":active,:focus")||c.hide()}}}return Gc(a,[{key:"shouldInitialize",value:function(){return this.options.airMode&&!Yc.isEmpty(this.options.popover.air)}},{key:"initialize",value:function(){var a=this;this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var b=this.$popover.find(".popover-content");this.context.invoke("buttons.build",b,this.options.popover.air),this.$popover.on("mousedown",function(){a.hidable=!1}),this.$popover.on("mouseup",function(){a.hidable=!0})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"update",value:function(a){var b=this.context.invoke("editor.currentStyle");if(!b.range||b.range.isCollapsed()&&!a)this.hide();else{var c={left:this.pageX,top:this.pageY},d=Lc()(this.options.container).offset();c.top-=d.top,c.left-=d.left,this.$popover.css({display:"block",left:Math.max(c.left,0)+-5,top:c.top+5}),this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}},{key:"updateCodeview",value:function(a){this.ui.toggleBtnActive(this.$popover.find(".btn-codeview"),a),a&&this.hide()}},{key:"hide",value:function(){this.hidable&&this.$popover.hide()}}]),a}(),Qd=function(){function a(b){var c=this;Hc(this,a),this.context=b,this.ui=Lc.a.summernote.ui,this.$editable=b.layoutInfo.editable,this.options=b.options,this.hint=this.options.hint||[],this.direction=this.options.hintDirection||"bottom",this.hints=Array.isArray(this.hint)?this.hint:[this.hint],this.events={"summernote.keyup":function(a,b){b.isDefaultPrevented()||c.handleKeyup(b)},"summernote.keydown":function(a,b){c.handleKeydown(b)},"summernote.disable summernote.dialog.shown summernote.blur":function(){c.hide()}}}return Jc(a,[{key:"shouldInitialize",value:function(){return this.hints.length>0}},{key:"initialize",value:function(){var a=this;this.lastWordRange=null,this.matchingWord=null,this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container),this.$popover.hide(),this.$content=this.$popover.find(".popover-content,.note-popover-content"),this.$content.on("click",".note-hint-item",function(b){a.$content.find(".active").removeClass("active"),Lc()(b.currentTarget).addClass("active"),a.replace()}),this.$popover.on("mousedown",function(a){a.preventDefault()})}},{key:"destroy",value:function(){this.$popover.remove()}},{key:"selectItem",value:function(a){this.$content.find(".active").removeClass("active"),a.addClass("active"),this.$content[0].scrollTop=a[0].offsetTop-this.$content.innerHeight()/2}},{key:"moveDown",value:function(){var a=this.$content.find(".note-hint-item.active"),b=a.next();if(b.length)this.selectItem(b);else{var c=a.parent().next();c.length||(c=this.$content.find(".note-hint-group").first()),this.selectItem(c.find(".note-hint-item").first())}}},{key:"moveUp",value:function(){var a=this.$content.find(".note-hint-item.active"),b=a.prev();if(b.length)this.selectItem(b);else{var c=a.parent().prev();c.length||(c=this.$content.find(".note-hint-group").last()),this.selectItem(c.find(".note-hint-item").last())}}},{key:"replace",value:function(){var a=this.$content.find(".note-hint-item.active");if(a.length){var b=this.nodeFromItem(a);if(null!==this.matchingWord&&0===this.matchingWord.length)this.lastWordRange.so=this.lastWordRange.eo;else if(null!==this.matchingWord&&this.matchingWord.length>0&&!this.lastWordRange.isCollapsed()){var c=this.lastWordRange.eo-this.lastWordRange.so-this.matchingWord.length;c>0&&(this.lastWordRange.so+=c)}if(this.lastWordRange.insertNode(b),"next"===this.options.hintSelect){var d=document.createTextNode("");Lc()(b).after(d),ld.createFromNodeBefore(d).select()}else ld.createFromNodeAfter(b).select();this.lastWordRange=null,this.hide(),this.context.invoke("editor.focus")}}},{key:"nodeFromItem",value:function(a){var b=this.hints[a.data("index")],c=a.data("item"),d=b.content?b.content(c):c;return"string"==typeof d&&(d=id.createText(d)),d}},{key:"createItemTemplates",value:function(a,b){var c=this.hints[a];return b.map(function(b){var d=Lc()('<div class="note-hint-item"/>');return d.append(c.template?c.template(b):b+""),d.data({index:a,item:b}),d})}},{key:"handleKeydown",value:function(a){this.$popover.is(":visible")&&(a.keyCode===nd.code.ENTER?(a.preventDefault(),this.replace()):a.keyCode===nd.code.UP?(a.preventDefault(),this.moveUp()):a.keyCode===nd.code.DOWN&&(a.preventDefault(),this.moveDown()))}},{key:"searchKeyword",value:function(a,b,c){var d=this.hints[a];if(d&&d.match.test(b)&&d.search){var e=d.match.exec(b);this.matchingWord=e[0],d.search(e[1],c)}else c()}},{key:"createGroup",value:function(a,b){var c=this,d=Lc()('<div class="note-hint-group note-hint-group-'+a+'"></div>');return this.searchKeyword(a,b,function(b){b=b||[],b.length&&(d.html(c.createItemTemplates(a,b)),c.show())}),d}},{key:"handleKeyup",value:function(a){var b=this;if(!Yc.contains([nd.code.ENTER,nd.code.UP,nd.code.DOWN],a.keyCode)){var c,d,e=this.context.invoke("editor.getLastRange");if("words"===this.options.hintMode){if(c=e.getWordsRange(e),d=c.toString(),this.hints.forEach(function(a){if(a.match.test(d))return c=e.getWordsMatchRange(a.match),!1}),!c)return void this.hide();d=c.toString()}else c=e.getWordRange(),d=c.toString();if(this.hints.length&&d){this.$content.empty();var f=Xc.rect2bnd(Yc.last(c.getClientRects())),g=Lc()(this.options.container).offset();f&&(f.top-=g.top,f.left-=g.left,this.$popover.hide(),this.lastWordRange=c,this.hints.forEach(function(a,c){a.match.test(d)&&b.createGroup(c,d).appendTo(b.$content)}),this.$content.find(".note-hint-item:first").addClass("active"),"top"===this.direction?this.$popover.css({left:f.left,top:f.top-this.$popover.outerHeight()-5}):this.$popover.css({left:f.left,top:f.top+f.height+5}))}else this.hide()}}},{key:"show",value:function(){this.$popover.show()}},{key:"hide",value:function(){this.$popover.hide()}}]),a}();Lc.a.summernote=Lc.a.extend(Lc.a.summernote,{version:"0.8.18",plugins:{},dom:id,range:ld,lists:Yc,options:{langInfo:Lc.a.summernote.lang["en-US"],editing:!0,modules:{editor:ud,clipboard:vd,dropzone:wd,codeview:xd,statusbar:yd,fullscreen:zd,handle:Ad,hintPopover:Qd,autoLink:Cd,autoSync:Dd,autoReplace:Ed,placeholder:Fd,buttons:Gd,toolbar:Hd,linkDialog:Id,linkPopover:Jd,imageDialog:Kd,imagePopover:Ld,tablePopover:Md,videoDialog:Nd,helpDialog:Od,airPopover:Pd},buttons:{},lang:"en-US",followingToolbar:!1,toolbarPosition:"top",otherStaticBar:"",codeviewKeepButton:!1,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:!0,popover:{image:[["resize",["resizeFull","resizeHalf","resizeQuarter","resizeNone"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]],["view",["fullscreen","codeview"]]]},airMode:!1,overrideContextMenu:!1,width:null,height:null,linkTargetBlank:!0,useProtocol:!0,defaultProtocol:"http://",focus:!1,tabDisabled:!1,tabSize:4,styleWithCSS:!1,shortcuts:!0,textareaAutoSync:!0,tooltip:"auto",container:null,maxTextLength:0,blockquoteBreakingLevel:2,spellCheck:!0,disableGrammar:!1,placeholder:null,inheritPlaceholder:!1,recordEveryKeystroke:!1,historyLimit:200,showDomainOnlyForAutolink:!1,hintMode:"word",hintSelect:"after",hintDirection:"bottom",styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],addDefaultFonts:!0,fontSizes:["8","9","10","11","12","14","18","24","36"],fontSizeUnits:["px","pt"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],colorButton:{foreColor:"#000000",backColor:"#FFFF00"},lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onBeforeCommand:null,onBlur:null,onBlurCodeview:null,onChange:null,onChangeCodeview:null,onDialogShown:null,onEnter:null,onFocus:null,onImageLinkInsert:null,onImageUpload:null,onImageUploadError:null,onInit:null,onKeydown:null,onKeyup:null,onMousedown:null,onMouseup:null,onPaste:null,onScroll:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},codeviewFilter:!1,codeviewFilterRegex:/<\/*(?:applet|b(?:ase|gsound|link)|embed|frame(?:set)?|ilayer|l(?:ayer|ink)|meta|object|s(?:cript|tyle)|t(?:itle|extarea)|xml)[^>]*?>/gi,codeviewIframeFilter:!0,codeviewIframeWhitelistSrc:[],codeviewIframeWhitelistSrcBase:["www.youtube.com","www.youtube-nocookie.com","www.facebook.com","vine.co","instagram.com","player.vimeo.com","www.dailymotion.com","player.youku.com","v.qq.com"],keyMap:{pc:{ESC:"escape",ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ESC:"escape",ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",floatLeft:"note-icon-float-left",floatRight:"note-icon-float-right",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",rollback:"note-icon-rollback",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})},4:function(a,b,c){},52:function(a,b,c){"use strict";function d(a){"@babel/helpers - typeof";return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}c.r(b);var e=c(0),f=c.n(e),g=c(1),h=g.a.create('<div class="note-editor note-frame panel panel-default"/>'),i=g.a.create('<div class="panel-heading note-toolbar" role="toolbar"/>'),j=g.a.create('<div class="note-editing-area"/>'),k=g.a.create('<textarea class="note-codable" aria-multiline="true"/>'),l=g.a.create('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>'),m=g.a.create(['<output class="note-status-output" role="status" aria-live="polite"></output>','<div class="note-statusbar" role="status">','<div class="note-resizebar" aria-label="Resize">','<div class="note-icon-bar"></div>','<div class="note-icon-bar"></div>','<div class="note-icon-bar"></div>',"</div>","</div>"].join("")),n=g.a.create('<div class="note-editor note-airframe"/>'),o=g.a.create(['<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"></div>','<output class="note-status-output" role="status" aria-live="polite"></output>'].join("")),p=g.a.create('<div class="note-btn-group btn-group">'),q=g.a.create('<ul class="note-dropdown-menu dropdown-menu">',function(a,b){var c=Array.isArray(b.items)?b.items.map(function(a){var c="string"==typeof a?a:a.value||"",e=b.template?b.template(a):a,f="object"===d(a)?a.option:void 0;return'<li aria-label="'+c+'"><a href="#" data-value="'+c+'"'+(void 0!==f?' data-option="'+f+'"':"")+">"+e+"</a></li>"}).join(""):b.items;a.html(c).attr({"aria-label":b.title}),b&&b.codeviewKeepButton&&a.addClass("note-codeview-keep")}),r=function(a,b){return a+" "+w(b.icons.caret,"span")},s=g.a.create('<ul class="note-dropdown-menu dropdown-menu note-check">',function(a,b){var c=Array.isArray(b.items)?b.items.map(function(a){var c="string"==typeof a?a:a.value||"",d=b.template?b.template(a):a;return'<li aria-label="'+a+'"><a href="#" data-value="'+c+'">'+w(b.checkClassName)+" "+d+"</a></li>"}).join(""):b.items;a.html(c).attr({"aria-label":b.title}),b&&b.codeviewKeepButton&&a.addClass("note-codeview-keep")}),t=g.a.create('<div class="modal note-modal" aria-hidden="false" tabindex="-1" role="dialog"/>',function(a,b){b.fade&&a.addClass("fade"),a.attr({"aria-label":b.title}),a.html(['<div class="modal-dialog">','<div class="modal-content">',b.title?'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</button><h4 class="modal-title">'+b.title+"</h4></div>":"",'<div class="modal-body">'+b.body+"</div>",b.footer?'<div class="modal-footer">'+b.footer+"</div>":"","</div>","</div>"].join(""))}),u=g.a.create(['<div class="note-popover popover in">','<div class="arrow"></div>','<div class="popover-content note-children-container"></div>',"</div>"].join(""),function(a,b){var c=void 0!==b.direction?b.direction:"bottom";a.addClass(c),b.hideArrow&&a.find(".arrow").hide()}),v=g.a.create('<div class="checkbox"></div>',function(a,b){a.html(["<label"+(b.id?' for="note-'+b.id+'"':"")+">",'<input type="checkbox"'+(b.id?' id="note-'+b.id+'"':""),b.checked?" checked":"",' aria-checked="'+(b.checked?"true":"false")+'"/>',b.text?b.text:"","</label>"].join(""))}),w=function(a,b){return"<"+(b=b||"i")+' class="'+a+'"></'+b+">"},x=function(a){return{editor:h,toolbar:i,editingArea:j,codable:k,editable:l,statusbar:m,airEditor:n,airEditable:o,buttonGroup:p,dropdown:q,dropdownButtonContents:r,dropdownCheck:s,dialog:t,popover:u,checkbox:v,icon:w,options:a,palette:function(b,c){return g.a.create('<div class="note-color-palette"/>',function(b,c){for(var d=[],e=0,f=c.colors.length;e<f;e++){for(var g=c.eventName,h=c.colors[e],i=c.colorsName[e],j=[],k=0,l=h.length;k<l;k++){var m=h[k],n=i[k];j.push(['<button type="button" class="note-color-btn"','style="background-color:',m,'" ','data-event="',g,'" ','data-value="',m,'" ','title="',n,'" ','aria-label="',n,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}d.push('<div class="note-color-row">'+j.join("")+"</div>")}b.html(d.join("")),c.tooltip&&b.find(".note-color-btn").tooltip({container:c.container||a.container,trigger:"hover",placement:"bottom"})})(b,c)},button:function(b,c){return g.a.create('<button type="button" class="note-btn btn btn-default btn-sm" tabindex="-1">',function(b,c){c&&c.tooltip&&b.attr({title:c.tooltip,"aria-label":c.tooltip}).tooltip({container:c.container||a.container,trigger:"hover",placement:"bottom"}).on("click",function(a){f()(a.currentTarget).tooltip("hide")}),c&&c.codeviewButton&&b.addClass("note-codeview-keep")})(b,c)},toggleBtn:function(a,b){a.toggleClass("disabled",!b),a.attr("disabled",!b)},toggleBtnActive:function(a,b){a.toggleClass("active",b)},onDialogShown:function(a,b){a.one("shown.bs.modal",b)},onDialogHidden:function(a,b){a.one("hidden.bs.modal",b)},showDialog:function(a){a.modal("show")},hideDialog:function(a){a.modal("hide")},createLayout:function(b){var c=(a.airMode?n([j([k(),o()])]):h("bottom"===a.toolbarPosition?[j([k(),l()]),i(),m()]:[i(),j([k(),l()]),m()])).render();return c.insertAfter(b),{note:b,editor:c,toolbar:c.find(".note-toolbar"),editingArea:c.find(".note-editing-area"),editable:c.find(".note-editable"),codable:c.find(".note-codable"),statusbar:c.find(".note-statusbar")}},removeLayout:function(a,b){a.html(b.editable.html()),b.editor.remove(),a.show()}}},y=x;c(3),c(4);f.a.summernote=f.a.extend(f.a.summernote,{ui_template:y,interface:"bs3"})}})}),function(a){a.extend(a.summernote.plugins,{ddmedia:function(b){var c=b.layoutInfo,d=c.toolbar,e=a.summernote.ui;this.initialize=function(){var c=e.button({className:"btn-info",contents:'<i class="fa fa-file-image-o"></i>',click:function(a){"undefined"==typeof MediaLibrary?top.basefrm&&top.basefrm.OverlayInstance&&top.basefrm.OverlayInstance.showOverlay(b):MediaLibrary.open(/image\/.*/i,function(a,c,d){b.invoke("editor.insertImage",d,function(a){a.css("max-width","100%"),a.attr("data-filename",c),a.attr("data-filepath",d),a.attr("data-source","media"),a.addClass("dd-wysiwyg-media-image")})})}});this.$button=c.render(),d.find(".note-btn-group.note-insert").length?d.find(".note-btn-group.note-insert").append(this.$button):d.append(a('<div class="note-btn-group btn-group" />').append(this.$button))},this.destroy=function(){this.$button.remove(),this.$button=null}}})}(jQuery),function(a){"use strict";var b=function(a){return a&&"TEXTAREA"===a.nodeName.toUpperCase()};a.extend(a.summernote.dom,{value:function(a,c){var d;if(b(a[0])){d=a.val();var e=new RegExp(/(=\s*")([^">]*)(\{\{([^\}\}]|\}[^\}]|[^\}]\})*\}\})([^">]*)(")/gi),f=new RegExp(/<img[^>]*src=\s*"(\{\{oViewConf.getMediaUrl\(\)\}\}[^">]+)"[^>]*data-filepath=\s*"([^">]+)"[^>]*class=\s*"[^">]*dd-wysiwyg-media-image[^">]*"[^>]*>/gi);d=d.replace(e,function(a,b,c,d,e,f,g){return d=d.replace(/\\"/g,"'").replace(/"/g,"'"),b+c+d+f+g}),d=d.replace(f,function(a,b,c){return a=a.replace(b,c)})}else d=a.html();return c?d.replace(/[\n\r]/g,""):d},html:function(b,c){var d=this.value(b);if(c){var e=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;d=d.replace(e,function(a,b,c){c=c.toUpperCase();var d=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(c)&&!!b,e=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(c);return a+(d||e?"\n":"")}),d=a.trim(d)}return d=d.replace(/<img[^>]*src=\s*"([^"]+)"[^>]*data-filename=\s*"([^">]+)"[^>]*class=\s*"[^">]*dd-wysiwyg-media-image[^">]*"[^>]*>/gi,function(a,b,c){return a.replace(b,"{{oViewConf.getMediaUrl()}}/"+c)}),d=d.replace(/\[\{(([^\}\]]|\}[^\]]|[^\}]\])*)\}\]/gi,function(b,c,d){return a("<textarea />").html(b).text()})}})}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(window.jQuery)}(function(a){a.extend(!0,a.summernote.lang,{"en-US":{videoResponsive:{dialogTitle:"Insert Video",tooltip:"Video",pluginTitle:"Video",href:"URL",ok:"OK",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"}},"de-DE":{videoResponsive:{dialogTitle:"Video einfügen",tooltip:"Video",pluginTitle:"Video",href:"URL",ok:"OK",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion oder Youku)"}}}),a.extend(a.summernote.options,{videoResponsive:{icon:'<i class="note-icon-video"></i>'}}),a.extend(a.summernote.plugins,{videoResponsive:function(b){var c=this,d=a.summernote.ui,e=b.layoutInfo.editor,f=b.layoutInfo.editable,g=b.options,h=g.langInfo;b.memo("button.videoResponsive",function(){return d.button({contents:g.videoResponsive.icon,tooltip:h.videoResponsive.tooltip,click:function(a){b.invoke("saveRange"),b.invoke("videoResponsive.show")}}).render()}),this.initialize=function(){var b=g.id,c=g.dialogsInBody?a(document.body):e,f='<div class="form-group note-form-group row-fluid">  <label for="note-video-responsive-href-'+b+'" class="note-form-label">'+h.videoResponsive.href+' <small class="text-muted">'+h.videoResponsive.providers+'</small></label>  <input type="text" id="note-video-responsive-href-'+b+'" class="note-video-responsive-href form-control note-form-control note-input"></div>';this.$dialog=d.dialog({title:h.videoResponsive.dialogTitle,body:f,footer:'<button href="#" class="btn btn-primary note-video-responsive-btn">'+h.videoResponsive.ok+"</button>"}).render().appendTo(c)},this.destroy=function(){d.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(a,b){a.on("keypress",function(a){13===a.keyCode&&b.trigger("click")})},this.bindLabels=function(){c.$dialog.find(".form-control:first").focus().select(),c.$dialog.find("label").on("click",function(){a(this).parent().find(".form-control:first").focus()})},this.show=function(){var e=a(f.data("target")),g={vidDom:e,href:e.attr("href")};this.showLinkDialog(g).then(function(e){d.hideDialog(c.$dialog);var f=(e.vidDom,c.$dialog.find(".note-video-responsive-href")),g=f.val(),h=a("<div/>");h.addClass("embed-responsive embed-responsive-16by9");var i,j=/\/\/(?:(?:www|m)\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/,k=/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/,l=g.match(j),m=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/,n=g.match(m),o=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/,p=g.match(o),q=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/,r=g.match(q),s=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,t=g.match(s),u=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,v=g.match(u),w=/\/\/v\.qq\.com.*?vid=(.+)/,x=g.match(w),y=/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/,z=g.match(y),A=/^.+.(mp4|m4v)$/,B=g.match(A),C=/^.+.(ogg|ogv)$/,D=g.match(C),E=/^.+.(webm)$/,F=g.match(E),G=/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/,H=g.match(G);if(l&&11===l[1].length){var I=l[1],J=0;if(void 0!==l[2]){var K=l[2].match(k);if(K)for(var L=[3600,60,1],M=0,N=L.length;M<N;M++)J+=void 0!==K[M+1]?L[M]*parseInt(K[M+1],10):0}i=a("<iframe>").attr("frameborder",0).attr("src","//www.youtube-nocookie.com/embed/"+I+(J>0?"?start="+J:"")).attr("width","auto").attr("height","auto")}else if(n&&n[0].length)i=a("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+n[1]+"/embed/").attr("width","auto").attr("height","auto").attr("scrolling","no").attr("allowtransparency","true");else if(p&&p[0].length)i=a("<iframe>").attr("frameborder",0).attr("src",p[0]+"/embed/simple").attr("width","auto").attr("height","auto").attr("class","vine-embed");else if(r&&r[3].length)i=a("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+r[3]).attr("width","auto").attr("height","auto");else if(t&&t[2].length)i=a("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+t[2]).attr("width","auto").attr("height","auto");else if(v&&v[1].length)i=a("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("width","auto").attr("height","auto").attr("src","//player.youku.com/embed/"+v[1]);else if(x&&x[1].length||z&&z[2].length){var O=x&&x[1].length?x[1]:z[2];i=a("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("width","auto").attr("height","auto").attr("src","//v.qq.com/txp/iframe/player.html?vid="+O+"&amp;auto=0")}else if(B||D||F)i=a("<video controls>").attr("src",g).attr("width","auto").attr("height","auto");else{if(!H||!H[0].length)return!1
;i=a("<iframe>").attr("frameborder",0).attr("src","https://www.facebook.com/plugins/video.php?href="+encodeURIComponent(H[0])+"&show_text=0").attr("width","auto").attr("height","auto").attr("scrolling","no").attr("allowtransparency","true")}i.addClass("embed-responsive"),i.addClass("note-video-clip"),h.html(i),b.invoke("restoreRange"),b.invoke("editor.insertNode",h[0])})},this.showLinkDialog=function(e){return a.Deferred(function(a){var f=c.$dialog.find(".note-video-responsive-href");$editBtn=c.$dialog.find(".note-video-responsive-btn"),d.onDialogShown(c.$dialog,function(){b.triggerEvent("dialog.shown"),$editBtn.click(function(b){b.preventDefault(),a.resolve({vidDom:e.vidDom,href:f.val()})}),f.val(e.href).focus,c.bindEnterKey($editBtn),c.bindLabels()}),d.onDialogHidden(c.$dialog,function(){$editBtn.off("click"),"pending"===a.state()&&a.reject()}),d.showDialog(c.$dialog)})}}})}),function(a){a.extend(!0,a.summernote.lang,{"en-US":{link_extend:{or:"or",cms:"CMS-Ident"}}})}(jQuery),function(a){"use strict";a.fn.ddoeInitSummernote=function(b){var c=a.extend({lang:"de-DE",minHeight:100,toolbar:[["style",["style"]],["formatting",["bold","italic","underline","strikethrough","superscript","clear"]],["fontsize",["fontsize"]],["color",["color"]],["layout",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","videoResponsive","hr"]],["misc",["codeview"]]],dialogsInBody:!1,buttons:{ddmedia:"ddmedia"},disableDragAndDrop:!0,codeviewFilter:!0,codeviewIframeFilter:!0},b);return this.summernote(c)}}(jQuery);
//# sourceMappingURL=ddoesummernote.min.js.map