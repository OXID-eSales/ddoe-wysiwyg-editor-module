install_module:
  load_shop: 'moduleInstallation-ce-{{ .Github.SHA }}-{{ .Github.RunID }}-medialibrary'
  cache:
    prefix: &install_module_prefix 'moduleInstallation-ce-{{ .Github.SHA }}-{{ .Github.RunID }}-wysiwyg'
  ids: &ids 'ddoewysiwyg'
  activate: |
    ddoemedialibrary
    ddoewysiwyg
  git:
    module:
      url: &git_module_url 'OXID-eSales/ddoe-wysiwyg-editor-module'
      ref: '{{ .Github.RefName }}'
  package_name: &package_name 'ddoe/wysiwyg-editor-module'
  path: *ids

codeception:
  matrix_testplan: '["-"]'
  load_shop: *install_module_prefix
  title: codeception
  container:
    options: '-e THEME_ID=apex -e SELENIUM_SERVER_HOST=selenium -e BROWSER_NAME=chrome -e XDEBUG_MODE=coverage'
  configuration: 'dev-packages/{{ .Data.install_module.ids }}/tests/codeception.yml'
  suite: 'Acceptance'
  additional_options: '--coverage-xml=/var/www/codeception_coverage.xml -g ddoe_wysiwyg'
  logfile:
    prefix: 'codeception'
  output:
    prefix: 'codeception-artifacts'
  coverage:
    path: 'source/codeception_coverage.xml'

phpcs_tests:
  matrix:
    testplan: '["-"]'
  load_shop: *install_module_prefix

sonarcloud:
  matrix:
    testplan: '["-"]'
  load_shop: *install_module_prefix
  project_key: 'OXID-eSales_ddoe-wysiwyg-editor-module'
  project_name: *package_name
  parameters: |
    -Dsonar.language=php
    -Dsonar.scm.provider=git
    -Dsonar.sources=src
    -Dsonar.tests=tests